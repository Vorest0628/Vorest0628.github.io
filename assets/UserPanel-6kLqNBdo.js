const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserCommentManager-Fe6k4YKc.js","assets/vue-core-BYuX5Vli.js","assets/index-B6AuLqK3.js","assets/element-ui-drMXFw0_.js","assets/utils-DA1bHc0c.js","assets/index-DkyD1Y0t.css","assets/UserCommentManager-DxcSITGP.css","assets/UserAccountSettings-D7u-Mexp.js","assets/UserAccountSettings-BrmOo9tW.css"])))=>i.map(i=>d[i]);
import{b as e,_ as a,u as s,a as t}from"./index-B6AuLqK3.js";import{r as n,c as l,j as o,y as m,z as u,A as r,M as c,O as d,u as i,Q as p,I as y,al as v,J as b,R as _,aR as g,aP as f,P as M,a6 as h,H as w,K as P}from"./vue-core-BYuX5Vli.js";const j={getMyStats:()=>e.get("/user/stats"),getMyComments:()=>e.get("/user/comments"),getMyRecommendations:()=>e.get("/user/recommendations"),updateMyComment:(a,s)=>e.put(`/user/comments/${a}`,s),deleteMyComment:a=>e.delete(`/user/comments/${a}`),updateMyRecommendation:(a,s)=>e.put(`/user/recommendations/${a}`,s),deleteMyRecommendation:a=>e.delete(`/user/recommendations/${a}`),updateProfile:a=>e.put("/user/profile",a),changePassword:a=>e.put("/user/password",a),resetPassword:a=>e.post("/user/reset-password",a)},A={class:"user-panel-content"},C={class:"panel-header"},R={class:"header-content"},k={class:"user-info"},O={class:"user-section"},S={class:"section-tabs"},U={class:"tab-label"},V={class:"tab-content"},E={class:"my-comments"},I={class:"account-settings"},$=a({__name:"UserPanel",setup(e){const a=g(()=>t(()=>import("./UserCommentManager-Fe6k4YKc.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),$=g(()=>t(()=>import("./UserAccountSettings-D7u-Mexp.js"),__vite__mapDeps([7,1,2,3,4,5,8]))),x=s(),T=f(),z=n("my-comments"),D=n({myComments:0}),L=l(()=>[{key:"my-comments",label:"我的评论",count:D.value.myComments},{key:"settings",label:"账户设置",count:0}]),H=async()=>{if(!x.isAuthenticated)return alert("请先登录后再访问用户面板"),void T.push("/");x.isAdmin?T.push("/admin/dashboard"):await(async()=>{try{const e=await j.getMyStats();e.success&&(D.value=e.data)}catch(e){D.value={myComments:0}}})()};return o(async()=>{await x.initAuth(),await H()}),(e,s)=>{var t;const n=v("el-badge"),l=v("el-tab-pane"),o=v("el-tabs");return u(),m("div",A,[r("div",C,[r("div",R,[s[2]||(s[2]=r("h1",null,"用户管理面板",-1)),r("p",k,[c(" 欢迎，"+d(null==(t=i(x).user)?void 0:t.username)+"！ ",1),s[1]||(s[1]=r("span",{class:"role-badge user"},"普通用户",-1))])])]),r("div",O,[r("div",S,[p(o,{modelValue:z.value,"onUpdate:modelValue":s[0]||(s[0]=e=>z.value=e),type:"border-card",class:"custom-tabs"},{default:y(()=>[(u(!0),m(M,null,h(L.value,e=>(u(),w(l,{key:e.key,label:e.label,name:e.key},{label:y(()=>[r("span",U,[c(d(e.label)+" ",1),e.count>0?(u(),w(n,{key:0,value:e.count,type:"primary",style:{"margin-left":"5px"}},null,8,["value"])):P("",!0)])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),r("div",V,[b(r("div",E,[p(i(a))],512),[[_,"my-comments"===z.value]]),b(r("div",I,[p(i($))],512),[[_,"settings"===z.value]])])])])}}},[["__scopeId","data-v-a37e6482"]]),x=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{$ as U,x as a,j as u};
