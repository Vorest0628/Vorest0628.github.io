import{r as v,c as f,j as V,y as i,z as n,A as s,K as k,P as p,a6 as g,O as o,D as y,V as j}from"./vendor-CeqXcVya.js";import{f as C}from"./friendLink-Ct1Qh6ee.js";import{_ as x}from"./index-BH5EIy1g.js";import"./particles-D6-XlEtG.js";const B={class:"friend-links"},$={class:"link-filters"},G=["onClick"],M={key:0,class:"loading-state"},U={key:1,class:"error-state"},W={key:2,class:"links-grid"},z=["onClick"],D={class:"link-avatar"},E=["src","alt"],H={class:"link-info"},J={class:"link-meta"},N={class:"link-category"},I={key:0,class:"link-tags"},K={class:"link-actions"},O=["href"],P={class:"visit-count"},T={key:3,class:"empty-state"},q={__name:"FriendLinks",setup(Q){const l=v("全部"),c=v([]),u=v(!1),r=v(""),b=f(()=>["全部",...new Set(c.value.map(e=>e.category))]),_=f(()=>{let t=c.value.filter(e=>e.isActive===!0);return l.value!=="全部"&&(t=t.filter(e=>e.category===l.value)),t}),h=async()=>{u.value=!0,r.value="";try{const t=await C.getFriendLinks();if(t.success)c.value=t.data.friendLinks||t.data;else throw new Error(t.message||"获取友情链接失败")}catch(t){console.error("❌ 获取友情链接失败:",t),r.value=t.message||"获取友情链接失败，请稍后重试",c.value=[{id:1,name:"Vue.js 官方文档",url:"https://vuejs.org",avatar:"https://vuejs.org/logo.svg",description:"Vue.js 官方文档，渐进式JavaScript框架",category:"学习资源",isActive:!0,tags:["Vue","JavaScript","前端"],visitCount:150},{id:2,name:"GitHub",url:"https://github.com",avatar:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",description:"全球最大的代码托管平台",category:"工具网站",isActive:!0,tags:["Git","开源","代码"],visitCount:89}]}finally{u.value=!1}},L=t=>{l.value=t},w=async t=>{try{await C.clickFriendLink(t._id||t.id),t.visitCount=(t.visitCount||0)+1}catch(e){console.error("记录访问失败:",e)}window.open(m(t.url),"_blank")},A=t=>t?"status-active":"status-inactive",F=t=>t?"正常":"待审核",S=t=>t?t.startsWith("http")?t:`http://localhost:3000${t}`:"/image/default-logo.png",m=t=>t?t.startsWith("http://")||t.startsWith("https://")?t:"https://"+t:"#";return V(()=>{h()}),(t,e)=>(n(),i("div",B,[e[4]||(e[4]=s("h1",null,"友情链接",-1)),e[5]||(e[5]=s("div",{class:"intro-section"},[s("p",null,"欢迎来到友情链接页面！这里收录了一些优秀的个人博客和技术网站。"),s("p",null,"希望这些网站能对你有所帮助，一起在互联网的世界里探索学习吧！")],-1)),s("div",$,[(n(!0),i(p,null,g(b.value,a=>(n(),i("button",{key:a,onClick:d=>L(a),class:y([{active:l.value===a},"category-btn"])},o(a),11,G))),128))]),u.value?(n(),i("div",M,e[1]||(e[1]=[s("p",null,"正在加载友情链接...",-1)]))):r.value?(n(),i("div",U,[e[2]||(e[2]=s("h3",null,"加载失败",-1)),s("p",null,o(r.value),1),s("button",{onClick:h,class:"retry-btn"},"重试")])):(n(),i("div",W,[(n(!0),i(p,null,g(_.value,a=>(n(),i("div",{key:a._id||a.id,class:"link-card",onClick:d=>w(a)},[s("div",D,[s("img",{src:S(a.avatar),alt:a.name},null,8,E)]),s("div",H,[s("h3",null,o(a.name),1),s("p",null,o(a.description||"暂无描述"),1),s("div",J,[s("span",N,o(a.category),1),s("span",{class:y(["link-status",A(a.isActive)])},o(F(a.isActive)),3)]),a.tags&&a.tags.length?(n(),i("div",I,[(n(!0),i(p,null,g(a.tags,d=>(n(),i("span",{key:d,class:"tag"},o(d),1))),128))])):k("",!0)]),s("div",K,[s("a",{href:m(a.url),target:"_blank",class:"visit-btn",onClick:e[0]||(e[0]=j(()=>{},["stop"]))}," 🔗 访问 ",8,O),s("span",P,"访问: "+o(a.visitCount||0),1)])],8,z))),128))])),!u.value&&!r.value&&_.value.length===0?(n(),i("div",T,e[3]||(e[3]=[s("h3",null,"暂无友链",-1),s("p",null,"该分类下还没有友情链接",-1)]))):k("",!0)]))}},tt=x(q,[["__scopeId","data-v-066148a0"]]);export{tt as default};
