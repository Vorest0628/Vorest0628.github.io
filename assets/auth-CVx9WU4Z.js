import{a as e}from"./utils-DA1bHc0c.js";const t=e.create({baseURL:(()=>{if("undefined"!=typeof window){const e=window.location.hostname;if("shirakawananase.top"===e||e.endsWith(".shirakawananase.top"))return"https://api.shirakawananase.top/api"}return"http://localhost:3000/api"})(),timeout:5e3});t.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e.data,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const o={setAuth:(e,t)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t))},getAuth:()=>({token:localStorage.getItem("token"),user:JSON.parse(localStorage.getItem("user"))}),clearAuth:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},isAuthenticated:()=>!!localStorage.getItem("token")};export{o as authStorage,t as default};
