import{r as a,c as t,j as s,y as i,z as e,A as l,K as n,P as r,a6 as o,O as u,D as c,V as v}from"./vue-core-BYuX5Vli.js";import{f as d}from"./friendLink-BvIdLo5P.js";import{_ as p}from"./index-B6AuLqK3.js";import"./element-ui-drMXFw0_.js";import"./utils-DA1bHc0c.js";const g={class:"friend-links"},k={class:"link-filters"},h=["onClick"],m={key:0,class:"loading-state"},y={key:1,class:"error-state"},f={key:2,class:"links-grid"},w=["onClick"],b={class:"link-avatar"},C=["src","alt"],j={class:"link-info"},_={class:"link-meta"},A={class:"link-category"},L={key:0,class:"link-tags"},V={class:"link-actions"},W=["href"],F={class:"visit-count"},G={key:3,class:"empty-state"},S=p({__name:"FriendLinks",setup(p){const S=a("全部"),x=a([]),H=a(!1),J=a(""),$=t(()=>["全部",...new Set(x.value.map(a=>a.category))]),z=t(()=>{let a=x.value.filter(a=>!0===a.isActive);return"全部"!==S.value&&(a=a.filter(a=>a.category===S.value)),a}),D=async()=>{H.value=!0,J.value="";try{const a=await d.getFriendLinks();if(!a.success)throw new Error(a.message||"获取友情链接失败");x.value=a.data.friendLinks||a.data}catch(a){J.value=a.message||"获取友情链接失败，请稍后重试",x.value=[{id:1,name:"Vue.js 官方文档",url:"https://vuejs.org",avatar:"https://vuejs.org/logo.svg",description:"Vue.js 官方文档，渐进式JavaScript框架",category:"学习资源",isActive:!0,tags:["Vue","JavaScript","前端"],visitCount:150},{id:2,name:"GitHub",url:"https://github.com",avatar:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",description:"全球最大的代码托管平台",category:"工具网站",isActive:!0,tags:["Git","开源","代码"],visitCount:89}]}finally{H.value=!1}},E=a=>a?"正常":"待审核",I=a=>{if(!a)return"/image/default-logo.png";if(a.startsWith("http"))return a;return`${"undefined"==typeof window||"shirakawananase.top"!==window.location.hostname&&!window.location.hostname.endsWith(".shirakawananase.top")?"http://localhost:3000":"https://api.shirakawananase.top"}${a}`},K=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:"https://"+a:"#";return s(()=>{D()}),(a,t)=>(e(),i("div",g,[t[4]||(t[4]=l("h1",null,"友情链接",-1)),t[5]||(t[5]=l("div",{class:"intro-section"},[l("p",null,"欢迎来到友情链接页面！这里收录了一些优秀的个人博客和技术网站。"),l("p",null,"希望这些网站能对你有所帮助，一起在互联网的世界里探索学习吧！")],-1)),l("div",k,[(e(!0),i(r,null,o($.value,a=>(e(),i("button",{key:a,onClick:t=>(a=>{S.value=a})(a),class:c([{active:S.value===a},"category-btn"])},u(a),11,h))),128))]),H.value?(e(),i("div",m,t[1]||(t[1]=[l("p",null,"正在加载友情链接...",-1)]))):J.value?(e(),i("div",y,[t[2]||(t[2]=l("h3",null,"加载失败",-1)),l("p",null,u(J.value),1),l("button",{onClick:D,class:"retry-btn"},"重试")])):(e(),i("div",f,[(e(!0),i(r,null,o(z.value,a=>{return e(),i("div",{key:a._id||a.id,class:"link-card",onClick:t=>(async a=>{try{await d.clickFriendLink(a._id||a.id),a.visitCount=(a.visitCount||0)+1}catch(t){}window.open(K(a.url),"_blank")})(a)},[l("div",b,[l("img",{src:I(a.avatar),alt:a.name},null,8,C)]),l("div",j,[l("h3",null,u(a.name),1),l("p",null,u(a.description||"暂无描述"),1),l("div",_,[l("span",A,u(a.category),1),l("span",{class:c(["link-status",(s=a.isActive,s?"status-active":"status-inactive")])},u(E(a.isActive)),3)]),a.tags&&a.tags.length?(e(),i("div",L,[(e(!0),i(r,null,o(a.tags,a=>(e(),i("span",{key:a,class:"tag"},u(a),1))),128))])):n("",!0)]),l("div",V,[l("a",{href:K(a.url),target:"_blank",class:"visit-btn",onClick:t[0]||(t[0]=v(()=>{},["stop"]))}," 🔗 访问 ",8,W),l("span",F,"访问: "+u(a.visitCount||0),1)])],8,w);var s}),128))])),H.value||J.value||0!==z.value.length?n("",!0):(e(),i("div",G,t[3]||(t[3]=[l("h3",null,"暂无友链",-1),l("p",null,"该分类下还没有友情链接",-1)])))]))}},[["__scopeId","data-v-771078bd"]]);export{S as default};
