const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ParticlesBackground-CSae53lr.js","assets/vue-core-BH5VTiN9.js","assets/element-ui-B3nexxj5.js","assets/utils-DA1bHc0c.js","assets/ParticlesBackground-D5zPZsL3.css","assets/Home-DWnL9bCL.js","assets/blog-BUvA8n2N.js","assets/document-CHhm0Gxb.js","assets/Home-SLJOLGLy.css","assets/About-Cc1A9hjN.js","assets/About-DLFeQVSD.css","assets/Blog-BNYlvGH7.js","assets/Blog-D6E1g-vt.css","assets/BlogDetail-DBgG3T8R.js","assets/CommentNode-CD-zJ3tH.js","assets/CommentNode-D5TfL2Kk.css","assets/marked.esm-BNz8l3bD.js","assets/purify.es-COJDRNUs.js","assets/BlogDetail-BxwQic4T.css","assets/Gallery-BZWVqttJ.js","assets/gallery-B1-iJOZh.js","assets/Gallery-Bk5XPkQl.css","assets/Comments-BSbrf0f4.js","assets/Comments-nhSol2Wb.css","assets/DocumentLibrary-r8VzZJRz.js","assets/doc-viewer-DbAwu9RU.js","assets/pdf-lib-Bvf7_W21.js","assets/DocumentLibrary-CgUMn5S-.css","assets/FriendLinks-CycQmDYk.js","assets/friendLink-Ma5Uid9E.js","assets/FriendLinks-BygWDlhb.css","assets/README-DTSk2ZZw.js","assets/README-BjcRUAvM.css","assets/SearchView-CHCgyPxE.js","assets/SearchView-BCmuIbDK.css","assets/AdminPanel-Dge3uNMN.js","assets/auth-CVx9WU4Z.js","assets/admin-BRBG1mYN.js","assets/UserPanel-Bz18ivhV.js","assets/UserPanel-C9_ByXtw.css","assets/AdminPanel-DItDyygo.css","assets/NotFound-Dmid4XGL.js","assets/NotFound-DCGDmGVe.css"])))=>i.map(i=>d[i]);
import{r as e,c as t,j as a,S as s,y as l,K as o,z as n,A as r,D as u,P as i,a6 as d,C as c,Q as m,al as v,aN as p,I as h,M as f,V as g,O as _,aO as b,aP as w,H as k,J as y,R as C,T as A,u as E,aj as P,a1 as L,w as T,aQ as I,aR as D,aS as V,L as j,aT as O,aU as R,au as S,aV as x}from"./vue-core-BH5VTiN9.js";import{E as B,i as N}from"./element-ui-B3nexxj5.js";import{a as U,A as q}from"./utils-DA1bHc0c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},F={key:0,class:"arrow-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$={key:1,class:"arrow-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z={key:2,class:"arrow-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W={key:3,class:"arrow-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G=M({__name:"CustomCursor",props:{dotSize:{type:Number,default:16},expandedSize:{type:Number,default:32},dotColor:{type:String,default:"rgba(193, 234, 255, 0.5)"},ringColor:{type:String,default:"rgba(0, 170, 255, 0.5)"},transitionDuration:{type:Number,default:200},smoothFollow:{type:Boolean,default:!0},smoothFactor:{type:Number,default:.8,validator:e=>e>=0&&e<=1},opacity:{type:Number,default:.85,validator:e=>e>=0&&e<=1}},setup(m){const v=m,p=e(0),h=e(0),f=e(0),g=e(0),_=e(!1),b=e(!1),w=e(!0),k=e(!1),y=e("default"),C=e([]);let A=0,E=null,P=null;const L=t(()=>({transform:`translate3d(${p.value}px, ${h.value}px, 0)`,"--dot-size":`${v.dotSize}px`,"--expanded-size":`${v.expandedSize}px`,"--dot-color":v.dotColor,"--ring-color":v.ringColor,"--transition-duration":`${v.transitionDuration}ms`,opacity:v.opacity})),T=e=>{f.value=e.clientX,g.value=e.clientY,v.smoothFollow||(p.value=f.value,h.value=g.value)},I=e=>{const t=e.target;(e=>{var t;if(!e)return!1;const a=e.tagName;if(["INPUT","TEXTAREA"].includes(a)){if("INPUT"===a){const a=null==(t=e.type)?void 0:t.toLowerCase();return["text","password","email","search","tel","url","number"].includes(a)||!a}return!0}return!!e.isContentEditable})(t)?(y.value="input",b.value=!0,_.value=!1):(e=>{if(!e)return!1;if("A"===e.tagName)return!0;let t=e.parentElement;for(;t;){if("A"===t.tagName)return!0;t=t.parentElement}return!1})(t)?(y.value="link",_.value=!0,b.value=!1):(e=>{var t;if(!e)return!1;const a=e.tagName;return"BUTTON"===a||!("INPUT"!==a||!["button","submit","reset"].includes(null==(t=e.type)?void 0:t.toLowerCase()))||"button"===e.getAttribute("role")})(t)?(y.value="button",_.value=!0,b.value=!1):(y.value="default",_.value=!1,b.value=!1)},D=e=>{y.value="default",_.value=!1,b.value=!1},V=()=>{w.value=!1},j=()=>{w.value||(w.value=!0);const e=++A;C.value.push({id:e,duration:600}),setTimeout(()=>{C.value=C.value.filter(t=>t.id!==e)},600)},O=()=>{v.smoothFollow&&(p.value+=(f.value-p.value)*v.smoothFactor,h.value+=(g.value-h.value)*v.smoothFactor),E=requestAnimationFrame(O)};return a(()=>{k.value=(()=>{const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent);return e||t})(),k.value||(P=document.createElement("style"),P.id="custom-cursor-global-style",P.textContent="\n    *, *::before, *::after {\n      cursor: none !important;\n    }\n  ",document.head.appendChild(P),document.addEventListener("mousemove",T,{passive:!0}),document.addEventListener("mouseover",I,{passive:!0}),document.addEventListener("mouseout",D,{passive:!0}),document.addEventListener("contextmenu",V,{passive:!0}),document.addEventListener("click",j,{passive:!0}),E=requestAnimationFrame(O))}),s(()=>{k.value||(P&&P.parentNode&&(P.parentNode.removeChild(P),P=null),document.removeEventListener("mousemove",T),document.removeEventListener("mouseover",I),document.removeEventListener("mouseout",D),document.removeEventListener("contextmenu",V),document.removeEventListener("click",j),E&&(cancelAnimationFrame(E),E=null))}),(e,t)=>k.value?o("",!0):(n(),l("div",{key:0,class:u(["custom-cursor",{hidden:!w.value,expanded:_.value,"cursor-input":"input"===y.value,"cursor-link":"link"===y.value,"cursor-button":"button"===y.value}]),style:c(L.value)},[t[4]||(t[4]=r("div",{class:"cursor-dot"},null,-1)),r("div",{class:u(["cursor-ring",{active:_.value}])},null,2),(n(!0),l(i,null,d(C.value,e=>(n(),l("div",{key:e.id,class:"cursor-ripple",style:c({animationDuration:e.duration+"ms"})},null,4))),128)),r("div",{class:u(["cursor-arrow",`arrow-${y.value}`])},["default"===y.value?(n(),l("svg",F,t[0]||(t[0]=[r("path",{d:"M3 3L10.07 19.97L12.58 12.58L19.97 10.07L3 3Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):"link"===y.value?(n(),l("svg",$,t[1]||(t[1]=[r("path",{d:"M9 3L15 3C16.6569 3 18 4.34315 18 6L18 15C18 16.6569 16.6569 18 15 18L12 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M9 21L9 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M6 13L9 9L12 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):"input"===y.value?(n(),l("svg",z,t[2]||(t[2]=[r("path",{d:"M12 4V20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M8 4H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M8 20H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)]))):"button"===y.value?(n(),l("svg",W,t[3]||(t[3]=[r("path",{d:"M9 3L15 3C16.6569 3 18 4.34315 18 6L18 15C18 16.6569 16.6569 18 15 18L12 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M9 21L9 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),r("path",{d:"M6 13L9 9L12 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):o("",!0)],2)],6))}},[["__scopeId","data-v-28798bdb"]]),H={__name:"App",setup:e=>(e,t)=>{const a=v("router-view");return n(),l("div",null,[m(G,{"dot-size":20,"expanded-size":40,"dot-color":"snow","ring-color":"rgba(0, 117, 176, 0.9)","transition-duration":200,"smooth-follow":!1,"smooth-factor":.95,opacity:.5}),m(a)])}},J={},K=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(null==a?void 0:a.nonce)||(null==a?void 0:a.getAttribute("nonce"));s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in J)return;J[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,l&&s.setAttribute("nonce",l),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function l(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&l(e.reason);return e().catch(l)})},Q=U.create({baseURL:(()=>{const e=(e=>{try{const t=new Function("try{return import.meta.env}catch(e){return {}}")();return null==t?void 0:t[e]}catch{return}})("VITE_APP_API_URL");if(e)return e;if("undefined"!=typeof window){const e=window.location.hostname;if("shirakawananase.top"===e||e.endsWith(".shirakawananase.top"))return"https://api.shirakawananase.top/api"}return"/api"})(),timeout:3e4});Q.interceptors.request.use(e=>{const t="undefined"!=typeof window?localStorage.getItem("token"):null;return t&&(e.headers||(e.headers=new q),e.headers.Authorization=`Bearer ${t}`),e.metadata={startTime:new Date},e},e=>Promise.reject(e)),Q.interceptors.response.use(e=>{const t=new Date;e.config.metadata&&(t.getTime(),e.config.metadata.startTime.getTime());return e},e=>{var t;const a=new Date,s=e.config;(null==s?void 0:s.metadata)&&(a.getTime(),s.metadata.startTime.getTime());return 401===(null==(t=e.response)?void 0:t.status)&&"undefined"!=typeof window&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/admin")||(window.location.href="/")),e.response,Promise.reject(e)});const X={get:(e,t)=>Q.get(e,t).then(e=>e.data),delete:(e,t)=>Q.delete(e,t).then(e=>e.data),head:(e,t)=>Q.head(e,t).then(e=>e.data),options:(e,t)=>Q.options(e,t).then(e=>e.data),post:(e,t,a)=>Q.post(e,t,a).then(e=>e.data),put:(e,t,a)=>Q.put(e,t,a).then(e=>e.data),patch:(e,t,a)=>Q.patch(e,t,a).then(e=>e.data),postForm:(e,t,a)=>Q.postForm(e,t,a).then(e=>e.data),putForm:(e,t,a)=>Q.putForm(e,t,a).then(e=>e.data),patchForm:(e,t,a)=>Q.patchForm(e,t,a).then(e=>e.data),upload:(e,t,a)=>Q.post(e,t,{headers:{"Content-Type":"multipart/form-data"},...a||{}}).then(e=>e.data),download:(e,t,a)=>Q.get(e,{responseType:"blob",...a||{}}).then(e=>{const a=new Blob([e.data]),s=window.URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)})},Y={register:e=>X.post("/auth/register",e),login:e=>X.post("/auth/login",e),getCurrentUser:()=>X.get("/auth/me"),getAiConfig:()=>X.get("/auth/ai-config"),refreshToken:()=>X.post("/auth/refresh"),changePassword:e=>X.put("/auth/password",e),updateProfile:e=>X.put("/auth/profile",e),uploadAvatar:e=>X.upload("/auth/avatar",e),forgotPassword:e=>X.post("/auth/forgot-password",e),resetPassword:e=>X.post("/auth/reset-password",e),logout:()=>X.post("/auth/logout")},Z={setAuth(e,t){localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t))},getAuth(){const e=localStorage.getItem("token"),t=localStorage.getItem("user");return{token:e,user:t?JSON.parse(t):null}},clearAuth(){localStorage.removeItem("token"),localStorage.removeItem("user")},isAuthenticated:()=>!!localStorage.getItem("token"),isAdmin(){const{user:e}=this.getAuth();return"admin"===(null==e?void 0:e.role)}},ee=Object.freeze(Object.defineProperty({__proto__:null,authApi:Y,authStorage:Z},Symbol.toStringTag,{value:"Module"})),te=p("auth",()=>{const a=e(null),s=e(!0),l=t(()=>!!a.value),o=t(()=>{var e;return"admin"===(null==(e=a.value)?void 0:e.role)});return{user:a,loading:s,isAuthenticated:l,isAdmin:o,initAuth:async()=>{try{if(Z.isAuthenticated()){const{data:e}=await Y.getCurrentUser();a.value=e.user}}catch(e){Z.clearAuth()}finally{s.value=!1}},register:async e=>{const{data:t}=await Y.register(e);return Z.setAuth(t.token,t.user),a.value=t.user,t},login:async e=>{const{data:t}=await Y.login(e);return Z.setAuth(t.token,t.user),a.value=t.user,t},logout:()=>{Z.clearAuth(),a.value=null},updateUser:e=>{a.value={...a.value,...e},Z.setAuth(Z.getAuth().token,a.value)}}}),ae={getWebsiteStats:()=>X.get("/stats"),getPopularContent:()=>X.get("/stats/popular"),recordVisit:e=>X.post("/stats/visit",e)},se={class:"sidebar"},le={class:"sidebar-content"},oe={class:"widget"},ne={key:0,class:"content-loading"},re={key:1},ue=["onClick"],ie={class:"post-date"},de={key:2,class:"empty-content"},ce={class:"widget"},me={class:"tag-cloud"},ve={class:"widget"},pe={key:0,class:"stats-loading"},he={key:1,class:"stats"},fe={class:"stat-item"},ge={class:"stat-number"},_e={class:"stat-item"},be={class:"stat-number"},we={class:"stat-item"},ke={class:"stat-number"},ye={class:"stat-item"},Ce={class:"stat-number"},Ae=M({__name:"Sidebar",setup(t){const s=b(),o=e(!0),u=e(!0),c=e({visitCount:0,blogsCount:0,commentsCount:0,blogCommentsCount:0,messageBoardCommentsCount:0,documentsCount:0,imagesCount:0,songsCount:0,totalContent:0}),p=e([]);e([]);const w=e=>{if(null==e||isNaN(e))return"0";const t=Number(e);return t>=1e3?(t/1e3).toFixed(1)+"k":t.toString()},k=e=>{const t=new Date(e),a=new Date,s=Math.abs(a-t),l=Math.floor(s/864e5);return 0===l?"今天":1===l?"昨天":l<7?`${l}天前`:t.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},y=e=>{s.push({path:"/blog",query:{tag:e}})};return a(()=>{(async()=>{try{o.value=!0;const e=await ae.getWebsiteStats();if(e.success){const t=e.data;c.value={visitCount:(null==t?void 0:t.visitCount)||0,blogsCount:(null==t?void 0:t.blogsCount)||0,commentsCount:(null==t?void 0:t.commentsCount)||0,blogCommentsCount:(null==t?void 0:t.blogCommentsCount)||0,messageBoardCommentsCount:(null==t?void 0:t.messageBoardCommentsCount)||0,documentsCount:(null==t?void 0:t.documentsCount)||0,imagesCount:(null==t?void 0:t.imagesCount)||0,songsCount:(null==t?void 0:t.songsCount)||0,totalContent:(null==t?void 0:t.totalContent)||0}}}catch(e){c.value={visitCount:1234,blogsCount:0,commentsCount:0,blogCommentsCount:0,messageBoardCommentsCount:0,documentsCount:0,imagesCount:0,songsCount:0,totalContent:0}}finally{o.value=!1}})(),(async()=>{try{u.value=!0;const e=await ae.getPopularContent();e.success&&(p.value=e.data.recentBlogs||[])}catch(e){}finally{u.value=!1}})(),(async()=>{try{await ae.recordVisit({page:s.currentRoute.value.path,userAgent:navigator.userAgent})}catch(e){}})()}),(e,t)=>{const a=v("router-link");return n(),l("aside",se,[r("div",le,[t[20]||(t[20]=r("div",{class:"online-status"},[r("div",{class:"status-dot"}),r("span",{class:"status-text"},"当前在线")],-1)),t[21]||(t[21]=r("h2",null,"相关链接",-1)),r("ul",null,[t[8]||(t[8]=r("li",null,[r("a",{href:"https://space.bilibili.com/276555959",target:"_blank"},"Bilibili")],-1)),t[9]||(t[9]=r("li",null,[r("a",{href:"https://github.com/Vorest0628",target:"_blank"},"Github")],-1)),r("li",null,[m(a,{to:"/about"},{default:h(()=>t[5]||(t[5]=[f("关于我")])),_:1,__:[5]})]),r("li",null,[m(a,{to:"/gallery"},{default:h(()=>t[6]||(t[6]=[f("图库")])),_:1,__:[6]})]),r("li",null,[m(a,{to:"/documents"},{default:h(()=>t[7]||(t[7]=[f("文档库")])),_:1,__:[7]})])]),r("div",oe,[t[12]||(t[12]=r("h3",null,"最近文章",-1)),u.value?(n(),l("div",ne,t[10]||(t[10]=[r("p",null,"加载中...",-1)]))):p.value.length>0?(n(),l("ul",re,[(n(!0),l(i,null,d(p.value,e=>(n(),l("li",{key:e.id||e._id},[r("a",{href:"#",onClick:g(t=>{return a=e.slug||e.id||e._id,void s.push(`/blog/${a}`);var a},["prevent"])},_(e.title),9,ue),r("span",ie,_(k(e.createdAt||e.date)),1)]))),128))])):(n(),l("div",de,t[11]||(t[11]=[r("p",null,"暂无最近文章",-1)])))]),r("div",ce,[t[13]||(t[13]=r("h3",null,"标签云",-1)),r("div",me,[r("a",{href:"#",onClick:t[0]||(t[0]=g(e=>y("音乐"),["prevent"]))},"音乐"),r("a",{href:"#",onClick:t[1]||(t[1]=g(e=>y("编程"),["prevent"]))},"编程"),r("a",{href:"#",onClick:t[2]||(t[2]=g(e=>y("ACG"),["prevent"]))},"ACG"),r("a",{href:"#",onClick:t[3]||(t[3]=g(e=>y("Vue3"),["prevent"]))},"前端"),r("a",{href:"#",onClick:t[4]||(t[4]=g(e=>y("AI"),["prevent"]))},"AI")])]),r("div",ve,[t[19]||(t[19]=r("h3",null,"网站统计",-1)),o.value?(n(),l("div",pe,t[14]||(t[14]=[r("p",null,"加载中...",-1)]))):(n(),l("div",he,[r("div",fe,[r("span",ge,_(w(c.value.visitCount)),1),t[15]||(t[15]=r("span",{class:"stat-label"},"总访问量",-1))]),r("div",_e,[r("span",be,_(c.value.blogsCount),1),t[16]||(t[16]=r("span",{class:"stat-label"},"文章数量",-1))]),r("div",we,[r("span",ke,_(c.value.commentsCount),1),t[17]||(t[17]=r("span",{class:"stat-label"},"评论总数",-1))]),r("div",ye,[r("span",Ce,_(c.value.totalContent),1),t[18]||(t[18]=r("span",{class:"stat-label"},"总内容数",-1))])]))])])])}}},[["__scopeId","data-v-7b01d241"]]),Ee={class:"main-footer"},Pe={class:"footer-content"},Le={class:"copyright"},Te=M({__name:"Footer",setup(e){const a=t(()=>(new Date).getFullYear());return(e,t)=>(n(),l("footer",Ee,[r("div",Pe,[t[0]||(t[0]=r("div",{class:"footer-nav"},[r("p",null,[r("a",{href:"https://icp.gov.moe/?keyword=20257889",target:"_blank"},"萌ICP备20257889号")])],-1)),r("div",Le,[r("p",null,"© "+_(a.value)+" Vorest0628. All rights reserved.",1)]),t[1]||(t[1]=w('<div class="social-links" data-v-090bca8d><p data-v-090bca8d><a href="https://github.com/Vorest0628" target="_blank" rel="noopener" data-v-090bca8d><i class="fab fa-github" data-v-090bca8d></i></a><span data-v-090bca8d> | </span><a href="https://space.bilibili.com/276555959" target="_blank" rel="noopener" data-v-090bca8d><i class="fab fa-bilibili" data-v-090bca8d></i></a></p></div>',1))])]))}},[["__scopeId","data-v-090bca8d"]]),Ie={class:"site-brand"},De={class:"nav-menu"},Ve={class:"dropdown-menu"},je={class:"dropdown-menu"},Oe={class:"user-actions"},Re=["title"],Se=M({__name:"Navigation",setup(t){const o=b(),u=te(),d=e(""),p=e(!1),w=e(!1),T=e(null),I=e(100),D=()=>{alert("工具箱功能开发中，敬请期待！")},V=()=>{d.value.trim()&&(o.push({name:"search",query:{q:d.value.trim()}}).catch(e=>{}),d.value="")},j=()=>{u.isAdmin?o.push("/admin/dashboard"):o.push("/user/panel")},O=()=>{confirm("确定要退出登录吗？")&&(u.logout(),(o.currentRoute.value.path.startsWith("/admin")||o.currentRoute.value.path.startsWith("/user"))&&o.push("/"))},R=()=>{window.dispatchEvent(new Event("show-login"))};a(async()=>{await u.initAuth(),S(),window.addEventListener("resize",S)}),s(()=>{window.removeEventListener("resize",S)});const S=()=>{setTimeout(()=>{if(T.value){const e=T.value.getBoundingClientRect();I.value=e.height+5}},100)};return(e,t)=>{const a=v("router-link");return n(),l(i,null,[(n(),k(L,{to:"body"},[r("nav",{class:"main-nav",ref_key:"navElement",ref:T},[r("div",Ie,[m(a,{to:"/"},{default:h(()=>t[14]||(t[14]=[f("Vorest's Website")])),_:1,__:[14]})]),r("ul",De,[r("li",null,[m(a,{to:"/",onClick:t[0]||(t[0]=e=>{})},{default:h(()=>t[15]||(t[15]=[f("主页")])),_:1,__:[15]})]),r("li",null,[m(a,{to:"/blog",onClick:t[1]||(t[1]=e=>{})},{default:h(()=>t[16]||(t[16]=[f("博客")])),_:1,__:[16]})]),r("li",null,[r("a",{href:"#",onClick:g(D,["prevent"]),class:"toolbox-btn"},"工具箱")]),r("li",{class:"dropdown",onMouseenter:t[5]||(t[5]=e=>p.value=!0),onMouseleave:t[6]||(t[6]=e=>p.value=!1)},[r("a",{href:"#",onClick:t[2]||(t[2]=g(()=>{},["prevent"])),class:"dropdown-toggle"},"资源库 ▾"),m(A,{name:"dropdown"},{default:h(()=>[y(r("ul",Ve,[r("li",null,[m(a,{to:"/gallery",onClick:t[3]||(t[3]=e=>{})},{default:h(()=>t[17]||(t[17]=[f("图库")])),_:1,__:[17]})]),r("li",null,[m(a,{to:"/documents",onClick:t[4]||(t[4]=e=>{})},{default:h(()=>t[18]||(t[18]=[f("文档库")])),_:1,__:[18]})])],512),[[C,p.value]])]),_:1})],32),r("li",{class:"dropdown",onMouseenter:t[11]||(t[11]=e=>w.value=!0),onMouseleave:t[12]||(t[12]=e=>w.value=!1)},[r("a",{href:"#",onClick:t[7]||(t[7]=g(()=>{},["prevent"])),class:"dropdown-toggle"},"其他 ▾"),m(A,{name:"dropdown"},{default:h(()=>[y(r("ul",je,[r("li",null,[m(a,{to:"/comments",onClick:t[8]||(t[8]=e=>{})},{default:h(()=>t[19]||(t[19]=[f("评论")])),_:1,__:[19]})]),r("li",null,[m(a,{to:"/friends",onClick:t[9]||(t[9]=e=>{})},{default:h(()=>t[20]||(t[20]=[f("友情链接")])),_:1,__:[20]})]),r("li",null,[m(a,{to:"/about",onClick:t[10]||(t[10]=e=>{})},{default:h(()=>t[21]||(t[21]=[f("关于我")])),_:1,__:[21]})])],512),[[C,w.value]])]),_:1})],32)]),r("div",Oe,[E(u).isAuthenticated?(n(),l(i,{key:0},[r("button",{onClick:j,class:"user-panel-btn",title:E(u).isAdmin?"管理员控制台":"用户面板"},[t[22]||(t[22]=r("i",{class:"fas fa-cog"},null,-1)),f(" "+_(E(u).isAdmin?"管理控制台":"用户面板"),1)],8,Re),r("button",{onClick:O,class:"logout-btn",title:"退出登录"},t[23]||(t[23]=[r("i",{class:"fas fa-sign-out-alt"},null,-1),f(" 退出 ")]))],64)):(n(),l("button",{key:1,onClick:R,class:"login-btn",title:"用户登录"},t[24]||(t[24]=[r("i",{class:"fas fa-user"},null,-1),f(" 登录 ")]))),r("form",{class:"search-form",onSubmit:g(V,["prevent"])},[y(r("input",{type:"search","onUpdate:modelValue":t[13]||(t[13]=e=>d.value=e),placeholder:"搜索博客或文档..."},null,512),[[P,d.value]]),t[25]||(t[25]=r("button",{type:"submit"},[r("i",{class:"fas fa-search"})],-1))],32)])],512)])),r("div",{class:"nav-placeholder",style:c({height:I.value+"px"})},null,4)],64)}}},[["__scopeId","data-v-91bd1092"]]),xe={class:"modal-header"},Be={class:"mode-tabs"},Ne=["disabled"],Ue=["disabled"],qe={class:"form-group"},Me=["disabled"],Fe={key:0,class:"error-message"},$e={class:"form-group"},ze={class:"password-input"},We=["type","disabled"],Ge=["disabled"],He={key:0,class:"error-message"},Je={key:0,class:"error-banner"},Ke={class:"form-actions"},Qe=["disabled"],Xe=["disabled"],Ye={key:0,class:"fas fa-spinner fa-spin"},Ze={class:"form-group"},et=["disabled"],tt={key:0,class:"error-message"},at={class:"form-group"},st=["disabled"],lt={key:0,class:"error-message"},ot={class:"form-group"},nt={class:"password-input"},rt=["type","disabled"],ut=["disabled"],it={key:0,class:"error-message"},dt={class:"form-group"},ct={class:"password-input"},mt=["type","disabled"],vt=["disabled"],pt={key:0,class:"error-message"},ht={key:0,class:"error-banner"},ft={class:"form-actions"},gt=["disabled"],_t=["disabled"],bt={key:0,class:"fas fa-spinner fa-spin"},wt={class:"auth-tips"},kt={key:0},yt={key:1},Ct=M({__name:"LoginModal",props:{visible:{type:Boolean,default:!1}},emits:["close","success"],setup(a,{emit:s}){const i=a,d=s,c=te(),m=e(!0),v=e(!1),p=e(""),h=e(!1),b=e(!1),w=e({username:"",password:""}),k=e({username:"",email:"",password:"",confirmPassword:""}),C=e({username:"",password:""}),A=e({username:"",email:"",password:"",confirmPassword:""}),E=t(()=>w.value.username.trim().length>=2&&w.value.password.length>=6&&!C.value.username&&!C.value.password),L=t(()=>k.value.username.trim().length>=2&&k.value.email.trim()&&k.value.password.length>=6&&k.value.confirmPassword&&k.value.password===k.value.confirmPassword&&!A.value.username&&!A.value.email&&!A.value.password&&!A.value.confirmPassword),D=()=>{const e=w.value.username.trim();e?e.length<2?C.value.username="用户名至少需要2个字符":C.value.username="":C.value.username="用户名不能为空"},V=()=>{const e=w.value.password;e?e.length<6?C.value.password="密码至少需要6个字符":C.value.password="":C.value.password="密码不能为空"},j=()=>{const e=k.value.username.trim();e?e.length<2?A.value.username="用户名至少需要2个字符":e.length>20?A.value.username="用户名不能超过20个字符":/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)?A.value.username="":A.value.username="用户名只能包含字母、数字、下划线和中文":A.value.username="用户名不能为空"},O=()=>{const e=k.value.email.trim();e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?A.value.email="":A.value.email="请输入有效的邮箱地址":A.value.email="邮箱不能为空"},R=()=>{const e=k.value.password;e?e.length<6?A.value.password="密码至少需要6个字符":e.length>50?A.value.password="密码不能超过50个字符":A.value.password="":A.value.password="密码不能为空",k.value.confirmPassword&&S()},S=()=>{const e=k.value.password,t=k.value.confirmPassword;A.value.confirmPassword=t?e!==t?"两次输入的密码不一致":"":"请确认密码"},x=async()=>{var e,t,a,s,l;if(D(),V(),E.value){v.value=!0,p.value="";try{const e={username:w.value.username,password:w.value.password};await c.login(e),d("success"),d("close"),N()}catch(o){401===(null==(e=o.response)?void 0:e.status)?p.value="用户名或密码错误":403===(null==(t=o.response)?void 0:t.status)?p.value="账户已被禁用":500===(null==(a=o.response)?void 0:a.status)?p.value="服务器错误，请稍后重试":p.value=(null==(l=null==(s=o.response)?void 0:s.data)?void 0:l.message)||"登录失败，请检查网络连接"}finally{v.value=!1}}},B=async()=>{var e,t,a,s,l,o,n;if(j(),O(),R(),S(),L.value){v.value=!0,p.value="";try{const e={username:k.value.username.trim(),email:k.value.email.trim(),password:k.value.password};await c.register(e),d("success"),d("close"),N()}catch(r){400===(null==(e=r.response)?void 0:e.status)?p.value=(null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||"注册信息有误":409===(null==(s=r.response)?void 0:s.status)?p.value="用户名或邮箱已被注册":500===(null==(l=r.response)?void 0:l.status)?p.value="服务器错误，请稍后重试":p.value=(null==(n=null==(o=r.response)?void 0:o.data)?void 0:n.message)||"注册失败，请检查网络连接"}finally{v.value=!1}}},N=()=>{w.value.username="",w.value.password="",C.value.username="",C.value.password="",k.value.username="",k.value.email="",k.value.password="",k.value.confirmPassword="",A.value.username="",A.value.email="",A.value.password="",A.value.confirmPassword="",p.value="",h.value=!1,b.value=!1,m.value=!0},U=()=>{v.value||d("close")};return T(()=>i.visible,e=>{e&&N()}),T(m,()=>{p.value=""}),(e,t)=>a.visible?(n(),l("div",{key:0,class:"modal-overlay",onClick:U},[r("div",{class:"modal-content",onClick:t[14]||(t[14]=g(()=>{},["stop"]))},[r("div",xe,[r("h3",null,_(m.value?"用户登录":"用户注册"),1),r("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close")),title:"关闭"},t[15]||(t[15]=[r("i",{class:"fas fa-times"},null,-1)]))]),r("div",Be,[r("button",{onClick:t[1]||(t[1]=e=>m.value=!0),class:u([{active:m.value},"mode-tab"]),disabled:v.value},t[16]||(t[16]=[r("i",{class:"fas fa-sign-in-alt"},null,-1),f(" 登录 ")]),10,Ne),r("button",{onClick:t[2]||(t[2]=e=>m.value=!1),class:u([{active:!m.value},"mode-tab"]),disabled:v.value},t[17]||(t[17]=[r("i",{class:"fas fa-user-plus"},null,-1),f(" 注册 ")]),10,Ue)]),m.value?(n(),l("form",{key:0,onSubmit:g(x,["prevent"]),class:"auth-form"},[r("div",qe,[t[18]||(t[18]=r("label",{for:"username"},"用户名",-1)),y(r("input",{id:"username","onUpdate:modelValue":t[3]||(t[3]=e=>w.value.username=e),type:"text",placeholder:"请输入用户名",required:"",disabled:v.value,onBlur:D},null,40,Me),[[P,w.value.username]]),C.value.username?(n(),l("span",Fe,_(C.value.username),1)):o("",!0)]),r("div",$e,[t[19]||(t[19]=r("label",{for:"password"},"密码",-1)),r("div",ze,[y(r("input",{id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>w.value.password=e),type:h.value?"text":"password",placeholder:"请输入密码",required:"",disabled:v.value,onBlur:V},null,40,We),[[I,w.value.password]]),r("button",{type:"button",class:"password-toggle",onClick:t[5]||(t[5]=e=>h.value=!h.value),disabled:v.value,title:"显示/隐藏密码"},[r("i",{class:u(h.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,Ge)]),C.value.password?(n(),l("span",He,_(C.value.password),1)):o("",!0)]),p.value?(n(),l("div",Je,[t[20]||(t[20]=r("i",{class:"fas fa-exclamation-triangle"},null,-1)),f(" "+_(p.value),1)])):o("",!0),r("div",Ke,[r("button",{type:"button",onClick:t[6]||(t[6]=t=>e.$emit("close")),disabled:v.value,class:"cancel-btn"}," 取消 ",8,Qe),r("button",{type:"submit",disabled:v.value||!E.value,class:"submit-btn"},[v.value?(n(),l("i",Ye)):o("",!0),f(" "+_(v.value?"登录中...":"登录"),1)],8,Xe)])],32)):(n(),l("form",{key:1,onSubmit:g(B,["prevent"]),class:"auth-form"},[r("div",Ze,[t[21]||(t[21]=r("label",{for:"reg-username"},"用户名",-1)),y(r("input",{id:"reg-username","onUpdate:modelValue":t[7]||(t[7]=e=>k.value.username=e),type:"text",placeholder:"请输入用户名（2-20个字符）",required:"",disabled:v.value,onBlur:j},null,40,et),[[P,k.value.username]]),A.value.username?(n(),l("span",tt,_(A.value.username),1)):o("",!0)]),r("div",at,[t[22]||(t[22]=r("label",{for:"reg-email"},"邮箱",-1)),y(r("input",{id:"reg-email","onUpdate:modelValue":t[8]||(t[8]=e=>k.value.email=e),type:"email",placeholder:"请输入邮箱地址",required:"",disabled:v.value,onBlur:O},null,40,st),[[P,k.value.email]]),A.value.email?(n(),l("span",lt,_(A.value.email),1)):o("",!0)]),r("div",ot,[t[23]||(t[23]=r("label",{for:"reg-password"},"密码",-1)),r("div",nt,[y(r("input",{id:"reg-password","onUpdate:modelValue":t[9]||(t[9]=e=>k.value.password=e),type:h.value?"text":"password",placeholder:"请输入密码（至少6个字符）",required:"",disabled:v.value,onBlur:R},null,40,rt),[[I,k.value.password]]),r("button",{type:"button",class:"password-toggle",onClick:t[10]||(t[10]=e=>h.value=!h.value),disabled:v.value,title:"显示/隐藏密码"},[r("i",{class:u(h.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,ut)]),A.value.password?(n(),l("span",it,_(A.value.password),1)):o("",!0)]),r("div",dt,[t[24]||(t[24]=r("label",{for:"confirm-password"},"确认密码",-1)),r("div",ct,[y(r("input",{id:"confirm-password","onUpdate:modelValue":t[11]||(t[11]=e=>k.value.confirmPassword=e),type:b.value?"text":"password",placeholder:"请再次输入密码",required:"",disabled:v.value,onBlur:S},null,40,mt),[[I,k.value.confirmPassword]]),r("button",{type:"button",class:"password-toggle",onClick:t[12]||(t[12]=e=>b.value=!b.value),disabled:v.value,title:"显示/隐藏密码"},[r("i",{class:u(b.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,vt)]),A.value.confirmPassword?(n(),l("span",pt,_(A.value.confirmPassword),1)):o("",!0)]),p.value?(n(),l("div",ht,[t[25]||(t[25]=r("i",{class:"fas fa-exclamation-triangle"},null,-1)),f(" "+_(p.value),1)])):o("",!0),r("div",ft,[r("button",{type:"button",onClick:t[13]||(t[13]=t=>e.$emit("close")),disabled:v.value,class:"cancel-btn"}," 取消 ",8,gt),r("button",{type:"submit",disabled:v.value||!L.value,class:"submit-btn"},[v.value?(n(),l("i",bt)):o("",!0),f(" "+_(v.value?"注册中...":"注册"),1)],8,_t)])],32)),r("div",wt,[m.value?(n(),l("div",kt)):(n(),l("div",yt,t[26]||(t[26]=[r("p",null,[r("i",{class:"fas fa-info-circle"}),f(" 注册后自动登录")],-1),r("p",null,"请使用真实邮箱地址，方便找回密码",-1)])))])])])):o("",!0)}},[["__scopeId","data-v-2e423254"]]),At="/assets/background-bottom-Dw6yLUOT.jpg",Et={key:0,class:"initial-loading-overlay"},Pt={class:"container"},Lt={class:"main-content"},Tt={key:0,class:"loading"},It=[{path:"/",component:M({__name:"MainLayout",setup(t){const s=D(()=>K(()=>import("./ParticlesBackground-CSae53lr.js"),__vite__mapDeps([0,1,2,3,4]))),d=e(!1),c=e(!1),p=te(),f=e(!0),g=()=>{p.isAdmin},_=()=>{c.value=!0};return a(()=>{p.initAuth(),window.addEventListener("show-login",_),setTimeout(()=>{f.value=!1},800);"undefined"!=typeof requestIdleCallback?requestIdleCallback(()=>{d.value=!0,document.documentElement.classList.add("with-background-image"),document.documentElement.style.setProperty("--background-image",`url(${At})`)},{timeout:2e3}):setTimeout(()=>{d.value=!0,document.documentElement.classList.add("with-background-image"),document.documentElement.style.setProperty("--background-image",`url(${At})`)},1500)}),(e,t)=>{const a=v("router-view");return n(),l(i,null,[m(A,{name:"initial-load"},{default:h(()=>[f.value?(n(),l("div",Et,t[1]||(t[1]=[r("div",{class:"loading-spinner"},[r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"}),r("div",{class:"spinner-ring"}),r("p",{class:"loading-text"},"加载中...")],-1)]))):o("",!0)]),_:1}),r("div",{class:u(["app",{"app-loaded":!f.value}])},[d.value?(n(),k(E(s),{key:0})):o("",!0),r("div",Pt,[m(Se),r("main",Lt,[m(a,null,{default:h(({Component:e,route:a})=>[m(A,{name:"page-fade",mode:"out-in"},{default:h(()=>[(n(),k(V,null,[e&&a.meta.keepAlive?(n(),k(j(e),{key:a.fullPath})):o("",!0)],1024))]),_:2},1024),m(A,{name:"page-fade",mode:"out-in"},{default:h(()=>[e&&!a.meta.keepAlive?(n(),k(j(e),{key:a.fullPath})):o("",!0)]),_:2},1024),m(A,{name:"page-fade"},{default:h(()=>[e?o("",!0):(n(),l("div",Tt,t[2]||(t[2]=[r("div",{class:"loading-spinner-small"},[r("div",{class:"spinner-ring-small"})],-1),r("p",null,"页面加载中...",-1)])))]),_:2},1024)]),_:1})]),m(Ae),m(Te)]),m(Ct,{visible:c.value,onClose:t[0]||(t[0]=e=>c.value=!1),onSuccess:g},null,8,["visible"])],2)],64)}}},[["__scopeId","data-v-9dff4b66"]]),children:[{path:"",name:"home",component:()=>K(()=>import("./Home-DWnL9bCL.js"),__vite__mapDeps([5,1,6,7,2,3,8])).catch(e=>K(()=>import("./Home-DWnL9bCL.js"),__vite__mapDeps([5,1,6,7,2,3,8]))),meta:{title:"首页",keepAlive:!0}},{path:"/about",name:"about",component:()=>K(()=>import("./About-Cc1A9hjN.js"),__vite__mapDeps([9,1,2,3,10])).catch(e=>K(()=>import("./About-Cc1A9hjN.js"),__vite__mapDeps([9,1,2,3,10]))),meta:{title:"关于我",keepAlive:!1}},{path:"/blog",name:"blog",component:()=>K(()=>import("./Blog-BNYlvGH7.js"),__vite__mapDeps([11,1,6,2,3,12])).catch(e=>K(()=>import("./Blog-BNYlvGH7.js"),__vite__mapDeps([11,1,6,2,3,12]))),meta:{title:"博客",keepAlive:!0}},{path:"/blog/:id",name:"blog-detail",component:()=>K(()=>import("./BlogDetail-DBgG3T8R.js"),__vite__mapDeps([13,1,6,14,3,15,16,17,2,18])).catch(e=>K(()=>import("./BlogDetail-DBgG3T8R.js"),__vite__mapDeps([13,1,6,14,3,15,16,17,2,18]))),meta:{title:"博客详情",keepAlive:!1}},{path:"/gallery",name:"gallery",component:()=>K(()=>import("./Gallery-BZWVqttJ.js"),__vite__mapDeps([19,1,20,2,3,21])).catch(e=>K(()=>import("./Gallery-BZWVqttJ.js"),__vite__mapDeps([19,1,20,2,3,21]))),meta:{title:"图库",keepAlive:!0}},{path:"/comments",name:"comments",component:()=>K(()=>import("./Comments-BSbrf0f4.js"),__vite__mapDeps([22,1,14,3,15,2,23])).catch(e=>K(()=>import("./Comments-BSbrf0f4.js"),__vite__mapDeps([22,1,14,3,15,2,23]))),meta:{title:"评论",keepAlive:!1}},{path:"/documents",name:"documents",component:()=>K(()=>import("./DocumentLibrary-r8VzZJRz.js"),__vite__mapDeps([24,1,7,2,16,25,26,3,27])).catch(e=>K(()=>import("./DocumentLibrary-r8VzZJRz.js"),__vite__mapDeps([24,1,7,2,16,25,26,3,27]))),meta:{title:"文档库",keepAlive:!0}},{path:"/document",redirect:"/documents"},{path:"/friends",name:"friends",component:()=>K(()=>import("./FriendLinks-CycQmDYk.js"),__vite__mapDeps([28,1,29,2,3,30])).catch(e=>K(()=>import("./FriendLinks-CycQmDYk.js"),__vite__mapDeps([28,1,29,2,3,30]))),meta:{title:"友情链接",keepAlive:!0}},{path:"/readme",name:"readme",component:()=>K(()=>import("./README-DTSk2ZZw.js"),__vite__mapDeps([31,1,2,3,32])).catch(e=>K(()=>import("./README-DTSk2ZZw.js"),__vite__mapDeps([31,1,2,3,32]))),meta:{title:"使用指南",keepAlive:!1}},{path:"/search",name:"search",component:()=>K(()=>import("./SearchView-CHCgyPxE.js"),__vite__mapDeps([33,1,2,3,34])),meta:{title:"搜索结果",keepAlive:!1}},{path:"/admin/dashboard",name:"AdminDashboard",component:()=>K(()=>import("./AdminPanel-Dge3uNMN.js"),__vite__mapDeps([35,1,36,3,37,2,16,17,29,20,7,38,39,40])),meta:{requiresAuth:!0,requiresAdmin:!0,title:"管理员控制台",keepAlive:!1}},{path:"/user/panel",name:"UserPanel",component:()=>K(()=>import("./UserPanel-Bz18ivhV.js").then(e=>e.a),__vite__mapDeps([38,1,39])),meta:{requiresAuth:!0,title:"用户管理面板",keepAlive:!1}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>K(()=>import("./NotFound-Dmid4XGL.js"),__vite__mapDeps([41,1,2,3,42])).catch(e=>K(()=>import("./NotFound-Dmid4XGL.js"),__vite__mapDeps([41,1,2,3,42]))),meta:{title:"页面不存在"}}],Dt=O({history:R(),routes:It,scrollBehavior:(e,t,a)=>a||{top:0}});Dt.beforeEach(async(e,t,a)=>{if(e.path!==t.path||"/"===e.path){if(document.title=e.meta.title?`${e.meta.title} - Vorest's Website`:"Vorest's Website",e.meta.requiresAuth||e.meta.requiresAdmin){const{authStorage:t}=await K(async()=>{const{authStorage:e}=await import("./auth-CVx9WU4Z.js");return{authStorage:e}},__vite__mapDeps([36,3])),{token:l,user:o}=t.getAuth();if(!(l&&o||"/"===e.path))return alert(e.meta.requiresAdmin?"请先登录后再访问管理员面板":"请先登录后再访问此页面"),void a("/");if(e.meta.requiresAdmin){if("admin"!==o.role&&"/"!==e.path)return alert("您没有管理员权限"),void a("/");try{const{adminApi:e}=await K(async()=>{const{adminApi:e}=await import("./admin-BRBG1mYN.js");return{adminApi:e}},__vite__mapDeps([37,1,2,3])),t=new Promise((e,t)=>setTimeout(()=>t(new Error("验证超时")),5e3));await Promise.race([e.verifyAdmin(),t])}catch(s){if("/"!==e.path)return t.clearAuth(),alert("登录已过期，请重新登录"),void a("/")}}else if(e.meta.requiresAuth)try{const{authApi:e}=await K(async()=>{const{authApi:e}=await Promise.resolve().then(()=>ee);return{authApi:e}},void 0),t=new Promise((e,t)=>setTimeout(()=>t(new Error("验证超时")),5e3));await Promise.race([e.getCurrentUser(),t])}catch(s){if("/"!==e.path)return t.clearAuth(),alert("登录已过期，请重新登录"),void a("/")}}a()}else a(!1)}),Dt.onError(e=>{}),Dt.afterEach((e,t)=>{}),window.addEventListener("error",e=>{if(e.filename&&(e.filename.includes("content_scripts")||e.filename.includes("extension://")||e.filename.includes("chrome-extension://")))return e.preventDefault(),!1}),window.addEventListener("unhandledrejection",e=>{const t=e.reason;if(t&&t.stack&&(t.stack.includes("content_scripts")||t.stack.includes("extension://")||t.stack.includes("chrome-extension://")))return e.preventDefault(),!1});const Vt=S(H);for(const[jt,Ot]of Object.entries(B))Vt.component(jt,Ot);Vt.use(x()),Vt.use(Dt),Vt.use(N),Vt.mount("#app");export{M as _,K as a,X as b,Y as c,te as u};
