const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ParticlesBackground-ClgKXyGW.js","assets/vue-core-BYuX5Vli.js","assets/element-ui-drMXFw0_.js","assets/utils-DA1bHc0c.js","assets/ParticlesBackground-D5zPZsL3.css","assets/Home-au5S4xE7.js","assets/blog-uF5hDeOs.js","assets/document-BWgxCF9I.js","assets/Home-SLJOLGLy.css","assets/About-BOrg7sFZ.js","assets/About-DLFeQVSD.css","assets/Blog-CpiEkok1.js","assets/Blog-D6E1g-vt.css","assets/BlogDetail-CXU9sY7w.js","assets/CommentNode-DGiGoMRI.js","assets/CommentNode-D5TfL2Kk.css","assets/marked.esm-BNz8l3bD.js","assets/purify.es-COJDRNUs.js","assets/BlogDetail-BxwQic4T.css","assets/Gallery-Bb_KkTXF.js","assets/gallery-DWscGW5t.js","assets/Gallery-Bk5XPkQl.css","assets/Comments-gnKW1Ehq.js","assets/Comments-nhSol2Wb.css","assets/DocumentLibrary-DgPEfE6X.js","assets/doc-viewer-yfdaEtrM.js","assets/pdf-lib-Bvf7_W21.js","assets/DocumentLibrary-CgUMn5S-.css","assets/FriendLinks-DKqo8lIZ.js","assets/friendLink-BvIdLo5P.js","assets/FriendLinks-BygWDlhb.css","assets/README-BMv8P4Jn.js","assets/README-BjcRUAvM.css","assets/SearchView-CT_fPUks.js","assets/SearchView-BCmuIbDK.css","assets/AdminPanel-BYH8KFqq.js","assets/auth-CVx9WU4Z.js","assets/admin-DYrCn_N8.js","assets/UserPanel-6kLqNBdo.js","assets/UserPanel-C9_ByXtw.css","assets/AdminPanel-BFZZj3V5.css","assets/NotFound-zlTV6AUa.js","assets/NotFound-DCGDmGVe.css"])))=>i.map(i=>d[i]);
import{H as e,al as a,z as t,aN as s,r as l,c as n,w as o,y as r,K as u,A as i,O as d,D as c,M as m,V as p,J as v,aj as h,aO as f,j as _,S as g,Q as b,I as w,u as y,P as k,aP as A,a6 as C,aQ as E,aR as P,aS as L,L as I,aT as V,aU as D,au as T,aV as j}from"./vue-core-BYuX5Vli.js";import{E as O,i as R}from"./element-ui-drMXFw0_.js";import{a as S,A as q}from"./utils-DA1bHc0c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const B=(e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t};const U=B({},[["render",function(s,l){const n=a("router-view");return t(),e(n)}]]),$={},x=function(e,a,t){let s=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),l=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));s=e(a.map(e=>{if((e=function(e){return"/"+e}(e))in $)return;$[e]=!0;const a=e.endsWith(".css"),t=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const s=document.createElement("link");return s.rel=a?"stylesheet":"modulepreload",a||(s.as="script"),s.crossOrigin="",s.href=e,l&&s.setAttribute("nonce",l),document.head.appendChild(s),a?new Promise((a,t)=>{s.addEventListener("load",a),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function l(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return s.then(a=>{for(const e of a||[])"rejected"===e.status&&l(e.reason);return e().catch(l)})},F=S.create({baseURL:(()=>{const e=(e=>{try{const a=new Function("try{return import.meta.env}catch(e){return {}}")();return null==a?void 0:a[e]}catch{return}})("VITE_APP_API_URL");if(e)return e;if("undefined"!=typeof window){const e=window.location.hostname;if("shirakawananase.top"===e||e.endsWith(".shirakawananase.top"))return"https://api.shirakawananase.top/api"}return"/api"})(),timeout:3e4});F.interceptors.request.use(e=>{const a="undefined"!=typeof window?localStorage.getItem("token"):null;return a&&(e.headers||(e.headers=new q),e.headers.Authorization=`Bearer ${a}`),e.metadata={startTime:new Date},e},e=>Promise.reject(e)),F.interceptors.response.use(e=>{const a=new Date;e.config.metadata&&(a.getTime(),e.config.metadata.startTime.getTime());return e},e=>{var a;const t=new Date,s=e.config;(null==s?void 0:s.metadata)&&(t.getTime(),s.metadata.startTime.getTime());return 401===(null==(a=e.response)?void 0:a.status)&&"undefined"!=typeof window&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/admin")||(window.location.href="/")),e.response,Promise.reject(e)});const N={get:(e,a)=>F.get(e,a).then(e=>e.data),delete:(e,a)=>F.delete(e,a).then(e=>e.data),head:(e,a)=>F.head(e,a).then(e=>e.data),options:(e,a)=>F.options(e,a).then(e=>e.data),post:(e,a,t)=>F.post(e,a,t).then(e=>e.data),put:(e,a,t)=>F.put(e,a,t).then(e=>e.data),patch:(e,a,t)=>F.patch(e,a,t).then(e=>e.data),postForm:(e,a,t)=>F.postForm(e,a,t).then(e=>e.data),putForm:(e,a,t)=>F.putForm(e,a,t).then(e=>e.data),patchForm:(e,a,t)=>F.patchForm(e,a,t).then(e=>e.data),upload:(e,a,t)=>F.post(e,a,{headers:{"Content-Type":"multipart/form-data"},...t||{}}).then(e=>e.data),download:(e,a,t)=>F.get(e,{responseType:"blob",...t||{}}).then(e=>{const t=new Blob([e.data]),s=window.URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)})},M={register:e=>N.post("/auth/register",e),login:e=>N.post("/auth/login",e),getCurrentUser:()=>N.get("/auth/me"),refreshToken:()=>N.post("/auth/refresh"),changePassword:e=>N.put("/auth/password",e),updateProfile:e=>N.put("/auth/profile",e),uploadAvatar:e=>N.upload("/auth/avatar",e),forgotPassword:e=>N.post("/auth/forgot-password",e),resetPassword:e=>N.post("/auth/reset-password",e),logout:()=>N.post("/auth/logout")},W={setAuth(e,a){localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(a))},getAuth(){const e=localStorage.getItem("token"),a=localStorage.getItem("user");return{token:e,user:a?JSON.parse(a):null}},clearAuth(){localStorage.removeItem("token"),localStorage.removeItem("user")},isAuthenticated:()=>!!localStorage.getItem("token"),isAdmin(){const{user:e}=this.getAuth();return"admin"===(null==e?void 0:e.role)}},z=Object.freeze(Object.defineProperty({__proto__:null,authApi:M,authStorage:W},Symbol.toStringTag,{value:"Module"})),G=s("auth",()=>{const e=l(null),a=l(!0),t=n(()=>!!e.value),s=n(()=>{var a;return"admin"===(null==(a=e.value)?void 0:a.role)});return{user:e,loading:a,isAuthenticated:t,isAdmin:s,initAuth:async()=>{try{if(W.isAuthenticated()){const{data:a}=await M.getCurrentUser();e.value=a.user}}catch(t){W.clearAuth()}finally{a.value=!1}},register:async a=>{const{data:t}=await M.register(a);return W.setAuth(t.token,t.user),e.value=t.user,t},login:async a=>{const{data:t}=await M.login(a);return W.setAuth(t.token,t.user),e.value=t.user,t},logout:()=>{W.clearAuth(),e.value=null},updateUser:a=>{e.value={...e.value,...a},W.setAuth(W.getAuth().token,e.value)}}}),H={class:"modal-header"},J={class:"mode-tabs"},K=["disabled"],Q=["disabled"],Y={class:"form-group"},Z=["disabled"],X={key:0,class:"error-message"},ee={class:"form-group"},ae={class:"password-input"},te=["type","disabled"],se=["disabled"],le={key:0,class:"error-message"},ne={key:0,class:"error-banner"},oe={class:"form-actions"},re=["disabled"],ue=["disabled"],ie={key:0,class:"fas fa-spinner fa-spin"},de={class:"form-group"},ce=["disabled"],me={key:0,class:"error-message"},pe={class:"form-group"},ve=["disabled"],he={key:0,class:"error-message"},fe={class:"form-group"},_e={class:"password-input"},ge=["type","disabled"],be=["disabled"],we={key:0,class:"error-message"},ye={class:"form-group"},ke={class:"password-input"},Ae=["type","disabled"],Ce=["disabled"],Ee={key:0,class:"error-message"},Pe={key:0,class:"error-banner"},Le={class:"form-actions"},Ie=["disabled"],Ve=["disabled"],De={key:0,class:"fas fa-spinner fa-spin"},Te={class:"auth-tips"},je={key:0},Oe={key:1},Re=B({__name:"LoginModal",props:{visible:{type:Boolean,default:!1}},emits:["close","success"],setup(e,{emit:a}){const s=e,_=a,g=G(),b=l(!0),w=l(!1),y=l(""),k=l(!1),A=l(!1),C=l({username:"",password:""}),E=l({username:"",email:"",password:"",confirmPassword:""}),P=l({username:"",password:""}),L=l({username:"",email:"",password:"",confirmPassword:""}),I=n(()=>C.value.username.trim().length>=2&&C.value.password.length>=6&&!P.value.username&&!P.value.password),V=n(()=>E.value.username.trim().length>=2&&E.value.email.trim()&&E.value.password.length>=6&&E.value.confirmPassword&&E.value.password===E.value.confirmPassword&&!L.value.username&&!L.value.email&&!L.value.password&&!L.value.confirmPassword),D=()=>{const e=C.value.username.trim();e?e.length<2?P.value.username="用户名至少需要2个字符":P.value.username="":P.value.username="用户名不能为空"},T=()=>{const e=C.value.password;e?e.length<6?P.value.password="密码至少需要6个字符":P.value.password="":P.value.password="密码不能为空"},j=()=>{const e=E.value.username.trim();e?e.length<2?L.value.username="用户名至少需要2个字符":e.length>20?L.value.username="用户名不能超过20个字符":/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(e)?L.value.username="":L.value.username="用户名只能包含字母、数字、下划线和中文":L.value.username="用户名不能为空"},O=()=>{const e=E.value.email.trim();e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?L.value.email="":L.value.email="请输入有效的邮箱地址":L.value.email="邮箱不能为空"},R=()=>{const e=E.value.password;e?e.length<6?L.value.password="密码至少需要6个字符":e.length>50?L.value.password="密码不能超过50个字符":L.value.password="":L.value.password="密码不能为空",E.value.confirmPassword&&S()},S=()=>{const e=E.value.password,a=E.value.confirmPassword;L.value.confirmPassword=a?e!==a?"两次输入的密码不一致":"":"请确认密码"},q=async()=>{var e,a,t,s,l;if(D(),T(),I.value){w.value=!0,y.value="";try{const e={username:C.value.username,password:C.value.password};await g.login(e),_("success"),_("close"),U()}catch(n){401===(null==(e=n.response)?void 0:e.status)?y.value="用户名或密码错误":403===(null==(a=n.response)?void 0:a.status)?y.value="账户已被禁用":500===(null==(t=n.response)?void 0:t.status)?y.value="服务器错误，请稍后重试":y.value=(null==(l=null==(s=n.response)?void 0:s.data)?void 0:l.message)||"登录失败，请检查网络连接"}finally{w.value=!1}}},B=async()=>{var e,a,t,s,l,n,o;if(j(),O(),R(),S(),V.value){w.value=!0,y.value="";try{const e={username:E.value.username.trim(),email:E.value.email.trim(),password:E.value.password};await g.register(e),_("success"),_("close"),U()}catch(r){400===(null==(e=r.response)?void 0:e.status)?y.value=(null==(t=null==(a=r.response)?void 0:a.data)?void 0:t.message)||"注册信息有误":409===(null==(s=r.response)?void 0:s.status)?y.value="用户名或邮箱已被注册":500===(null==(l=r.response)?void 0:l.status)?y.value="服务器错误，请稍后重试":y.value=(null==(o=null==(n=r.response)?void 0:n.data)?void 0:o.message)||"注册失败，请检查网络连接"}finally{w.value=!1}}},U=()=>{C.value.username="",C.value.password="",P.value.username="",P.value.password="",E.value.username="",E.value.email="",E.value.password="",E.value.confirmPassword="",L.value.username="",L.value.email="",L.value.password="",L.value.confirmPassword="",y.value="",k.value=!1,A.value=!1,b.value=!0},$=()=>{w.value||_("close")};return o(()=>s.visible,e=>{e&&U()}),o(b,()=>{y.value=""}),(a,s)=>e.visible?(t(),r("div",{key:0,class:"modal-overlay",onClick:$},[i("div",{class:"modal-content",onClick:s[14]||(s[14]=p(()=>{},["stop"]))},[i("div",H,[i("h3",null,d(b.value?"用户登录":"用户注册"),1),i("button",{class:"close-btn",onClick:s[0]||(s[0]=e=>a.$emit("close")),title:"关闭"},s[15]||(s[15]=[i("i",{class:"fas fa-times"},null,-1)]))]),i("div",J,[i("button",{onClick:s[1]||(s[1]=e=>b.value=!0),class:c([{active:b.value},"mode-tab"]),disabled:w.value},s[16]||(s[16]=[i("i",{class:"fas fa-sign-in-alt"},null,-1),m(" 登录 ")]),10,K),i("button",{onClick:s[2]||(s[2]=e=>b.value=!1),class:c([{active:!b.value},"mode-tab"]),disabled:w.value},s[17]||(s[17]=[i("i",{class:"fas fa-user-plus"},null,-1),m(" 注册 ")]),10,Q)]),b.value?(t(),r("form",{key:0,onSubmit:p(q,["prevent"]),class:"auth-form"},[i("div",Y,[s[18]||(s[18]=i("label",{for:"username"},"用户名",-1)),v(i("input",{id:"username","onUpdate:modelValue":s[3]||(s[3]=e=>C.value.username=e),type:"text",placeholder:"请输入用户名",required:"",disabled:w.value,onBlur:D},null,40,Z),[[h,C.value.username]]),P.value.username?(t(),r("span",X,d(P.value.username),1)):u("",!0)]),i("div",ee,[s[19]||(s[19]=i("label",{for:"password"},"密码",-1)),i("div",ae,[v(i("input",{id:"password","onUpdate:modelValue":s[4]||(s[4]=e=>C.value.password=e),type:k.value?"text":"password",placeholder:"请输入密码",required:"",disabled:w.value,onBlur:T},null,40,te),[[f,C.value.password]]),i("button",{type:"button",class:"password-toggle",onClick:s[5]||(s[5]=e=>k.value=!k.value),disabled:w.value,title:"显示/隐藏密码"},[i("i",{class:c(k.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,se)]),P.value.password?(t(),r("span",le,d(P.value.password),1)):u("",!0)]),y.value?(t(),r("div",ne,[s[20]||(s[20]=i("i",{class:"fas fa-exclamation-triangle"},null,-1)),m(" "+d(y.value),1)])):u("",!0),i("div",oe,[i("button",{type:"button",onClick:s[6]||(s[6]=e=>a.$emit("close")),disabled:w.value,class:"cancel-btn"}," 取消 ",8,re),i("button",{type:"submit",disabled:w.value||!I.value,class:"submit-btn"},[w.value?(t(),r("i",ie)):u("",!0),m(" "+d(w.value?"登录中...":"登录"),1)],8,ue)])],32)):(t(),r("form",{key:1,onSubmit:p(B,["prevent"]),class:"auth-form"},[i("div",de,[s[21]||(s[21]=i("label",{for:"reg-username"},"用户名",-1)),v(i("input",{id:"reg-username","onUpdate:modelValue":s[7]||(s[7]=e=>E.value.username=e),type:"text",placeholder:"请输入用户名（2-20个字符）",required:"",disabled:w.value,onBlur:j},null,40,ce),[[h,E.value.username]]),L.value.username?(t(),r("span",me,d(L.value.username),1)):u("",!0)]),i("div",pe,[s[22]||(s[22]=i("label",{for:"reg-email"},"邮箱",-1)),v(i("input",{id:"reg-email","onUpdate:modelValue":s[8]||(s[8]=e=>E.value.email=e),type:"email",placeholder:"请输入邮箱地址",required:"",disabled:w.value,onBlur:O},null,40,ve),[[h,E.value.email]]),L.value.email?(t(),r("span",he,d(L.value.email),1)):u("",!0)]),i("div",fe,[s[23]||(s[23]=i("label",{for:"reg-password"},"密码",-1)),i("div",_e,[v(i("input",{id:"reg-password","onUpdate:modelValue":s[9]||(s[9]=e=>E.value.password=e),type:k.value?"text":"password",placeholder:"请输入密码（至少6个字符）",required:"",disabled:w.value,onBlur:R},null,40,ge),[[f,E.value.password]]),i("button",{type:"button",class:"password-toggle",onClick:s[10]||(s[10]=e=>k.value=!k.value),disabled:w.value,title:"显示/隐藏密码"},[i("i",{class:c(k.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,be)]),L.value.password?(t(),r("span",we,d(L.value.password),1)):u("",!0)]),i("div",ye,[s[24]||(s[24]=i("label",{for:"confirm-password"},"确认密码",-1)),i("div",ke,[v(i("input",{id:"confirm-password","onUpdate:modelValue":s[11]||(s[11]=e=>E.value.confirmPassword=e),type:A.value?"text":"password",placeholder:"请再次输入密码",required:"",disabled:w.value,onBlur:S},null,40,Ae),[[f,E.value.confirmPassword]]),i("button",{type:"button",class:"password-toggle",onClick:s[12]||(s[12]=e=>A.value=!A.value),disabled:w.value,title:"显示/隐藏密码"},[i("i",{class:c(A.value?"fas fa-eye-slash":"fas fa-eye")},null,2)],8,Ce)]),L.value.confirmPassword?(t(),r("span",Ee,d(L.value.confirmPassword),1)):u("",!0)]),y.value?(t(),r("div",Pe,[s[25]||(s[25]=i("i",{class:"fas fa-exclamation-triangle"},null,-1)),m(" "+d(y.value),1)])):u("",!0),i("div",Le,[i("button",{type:"button",onClick:s[13]||(s[13]=e=>a.$emit("close")),disabled:w.value,class:"cancel-btn"}," 取消 ",8,Ie),i("button",{type:"submit",disabled:w.value||!V.value,class:"submit-btn"},[w.value?(t(),r("i",De)):u("",!0),m(" "+d(w.value?"注册中...":"注册"),1)],8,Ve)])],32)),i("div",Te,[b.value?(t(),r("div",je)):(t(),r("div",Oe,s[26]||(s[26]=[i("p",null,[i("i",{class:"fas fa-info-circle"}),m(" 注册后自动登录")],-1),i("p",null,"请使用真实邮箱地址，方便找回密码",-1)])))])])])):u("",!0)}},[["__scopeId","data-v-2e423254"]]),Se={class:"main-header"},qe={class:"logo"},Be={class:"user-info"},Ue={class:"user-profile"},$e={class:"username"},xe={key:0,class:"admin-badge"},Fe=["title"],Ne=B({__name:"Header",setup(e){const s=A(),n=G(),o=l(!1),c=()=>{n.isAdmin},p=()=>{n.isAdmin?s.push("/admin/dashboard"):s.push("/user/panel")},v=()=>{confirm("确定要退出登录吗？")&&(n.logout(),(s.currentRoute.value.path.startsWith("/admin")||s.currentRoute.value.path.startsWith("/user"))&&s.push("/"))},h=()=>{o.value=!0};return _(async()=>{await n.initAuth(),window.addEventListener("show-login",h)}),g(()=>{window.removeEventListener("show-login",h)}),(e,s)=>{const l=a("router-link");return t(),r("header",Se,[i("div",qe,[b(l,{to:"/"},{default:w(()=>s[2]||(s[2]=[i("h1",null,"Vorest's personal website",-1)])),_:1,__:[2]})]),i("div",Be,[y(n).isAuthenticated?(t(),r(k,{key:0},[i("div",Ue,[i("span",$e,d(y(n).user.username),1),y(n).isAdmin?(t(),r("span",xe,"管理员")):u("",!0)]),i("button",{onClick:p,class:"user-panel-btn",title:y(n).isAdmin?"管理员控制台":"用户面板"},[s[3]||(s[3]=i("i",{class:"fas fa-cog"},null,-1)),m(" "+d(y(n).isAdmin?"管理控制台":"用户面板"),1)],8,Fe),i("button",{onClick:v,class:"logout-btn",title:"退出登录"},s[4]||(s[4]=[i("i",{class:"fas fa-sign-out-alt"},null,-1),m(" 退出 ")]))],64)):(t(),r("button",{key:1,onClick:s[0]||(s[0]=e=>o.value=!0),class:"login-btn",title:"用户登录"},s[5]||(s[5]=[i("i",{class:"fas fa-user"},null,-1),m(" 登录 ")])))]),b(Re,{visible:o.value,onClose:s[1]||(s[1]=e=>o.value=!1),onSuccess:c},null,8,["visible"])])}}},[["__scopeId","data-v-6f469ccc"]]),Me={getWebsiteStats:()=>N.get("/stats"),getPopularContent:()=>N.get("/stats/popular"),recordVisit:e=>N.post("/stats/visit",e)},We={class:"sidebar"},ze={class:"sidebar-content"},Ge={class:"widget"},He={key:0,class:"content-loading"},Je={key:1},Ke=["onClick"],Qe={class:"post-date"},Ye={key:2,class:"empty-content"},Ze={class:"widget"},Xe={class:"tag-cloud"},ea={class:"widget"},aa={key:0,class:"stats-loading"},ta={key:1,class:"stats"},sa={class:"stat-item"},la={class:"stat-number"},na={class:"stat-item"},oa={class:"stat-number"},ra={class:"stat-item"},ua={class:"stat-number"},ia={class:"stat-item"},da={class:"stat-number"},ca=B({__name:"Sidebar",setup(e){const s=A(),n=l(!0),o=l(!0),u=l({visitCount:0,blogsCount:0,commentsCount:0,blogCommentsCount:0,messageBoardCommentsCount:0,documentsCount:0,imagesCount:0,songsCount:0,totalContent:0}),c=l([]);l([]);const v=e=>{if(null==e||isNaN(e))return"0";const a=Number(e);return a>=1e3?(a/1e3).toFixed(1)+"k":a.toString()},h=e=>{const a=new Date(e),t=new Date,s=Math.abs(t-a),l=Math.floor(s/864e5);return 0===l?"今天":1===l?"昨天":l<7?`${l}天前`:a.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},f=e=>{s.push({path:"/blog",query:{tag:e}})};return _(()=>{(async()=>{try{n.value=!0;const e=await Me.getWebsiteStats();if(e.success){const a=e.data;u.value={visitCount:(null==a?void 0:a.visitCount)||0,blogsCount:(null==a?void 0:a.blogsCount)||0,commentsCount:(null==a?void 0:a.commentsCount)||0,blogCommentsCount:(null==a?void 0:a.blogCommentsCount)||0,messageBoardCommentsCount:(null==a?void 0:a.messageBoardCommentsCount)||0,documentsCount:(null==a?void 0:a.documentsCount)||0,imagesCount:(null==a?void 0:a.imagesCount)||0,songsCount:(null==a?void 0:a.songsCount)||0,totalContent:(null==a?void 0:a.totalContent)||0}}}catch(e){u.value={visitCount:1234,blogsCount:0,commentsCount:0,blogCommentsCount:0,messageBoardCommentsCount:0,documentsCount:0,imagesCount:0,songsCount:0,totalContent:0}}finally{n.value=!1}})(),(async()=>{try{o.value=!0;const e=await Me.getPopularContent();e.success&&(c.value=e.data.recentBlogs||[])}catch(e){}finally{o.value=!1}})(),(async()=>{try{await Me.recordVisit({page:s.currentRoute.value.path,userAgent:navigator.userAgent})}catch(e){}})()}),(e,l)=>{const _=a("router-link");return t(),r("aside",We,[i("div",ze,[l[20]||(l[20]=i("div",{class:"online-status"},[i("div",{class:"status-dot"}),i("span",{class:"status-text"},"当前在线")],-1)),l[21]||(l[21]=i("h2",null,"相关链接",-1)),i("ul",null,[l[8]||(l[8]=i("li",null,[i("a",{href:"https://space.bilibili.com/276555959",target:"_blank"},"Bilibili")],-1)),l[9]||(l[9]=i("li",null,[i("a",{href:"https://github.com/Vorest0628",target:"_blank"},"Github")],-1)),i("li",null,[b(_,{to:"/about"},{default:w(()=>l[5]||(l[5]=[m("关于我")])),_:1,__:[5]})]),i("li",null,[b(_,{to:"/gallery"},{default:w(()=>l[6]||(l[6]=[m("图库")])),_:1,__:[6]})]),i("li",null,[b(_,{to:"/documents"},{default:w(()=>l[7]||(l[7]=[m("文档库")])),_:1,__:[7]})])]),i("div",Ge,[l[12]||(l[12]=i("h3",null,"最近文章",-1)),o.value?(t(),r("div",He,l[10]||(l[10]=[i("p",null,"加载中...",-1)]))):c.value.length>0?(t(),r("ul",Je,[(t(!0),r(k,null,C(c.value,e=>(t(),r("li",{key:e.id||e._id},[i("a",{href:"#",onClick:p(a=>{return t=e.slug||e.id||e._id,void s.push(`/blog/${t}`);var t},["prevent"])},d(e.title),9,Ke),i("span",Qe,d(h(e.createdAt||e.date)),1)]))),128))])):(t(),r("div",Ye,l[11]||(l[11]=[i("p",null,"暂无最近文章",-1)])))]),i("div",Ze,[l[13]||(l[13]=i("h3",null,"标签云",-1)),i("div",Xe,[i("a",{href:"#",onClick:l[0]||(l[0]=p(e=>f("音乐"),["prevent"]))},"音乐"),i("a",{href:"#",onClick:l[1]||(l[1]=p(e=>f("编程"),["prevent"]))},"编程"),i("a",{href:"#",onClick:l[2]||(l[2]=p(e=>f("ACG"),["prevent"]))},"ACG"),i("a",{href:"#",onClick:l[3]||(l[3]=p(e=>f("Vue3"),["prevent"]))},"前端"),i("a",{href:"#",onClick:l[4]||(l[4]=p(e=>f("AI"),["prevent"]))},"AI")])]),i("div",ea,[l[19]||(l[19]=i("h3",null,"网站统计",-1)),n.value?(t(),r("div",aa,l[14]||(l[14]=[i("p",null,"加载中...",-1)]))):(t(),r("div",ta,[i("div",sa,[i("span",la,d(v(u.value.visitCount)),1),l[15]||(l[15]=i("span",{class:"stat-label"},"总访问量",-1))]),i("div",na,[i("span",oa,d(u.value.blogsCount),1),l[16]||(l[16]=i("span",{class:"stat-label"},"文章数量",-1))]),i("div",ra,[i("span",ua,d(u.value.commentsCount),1),l[17]||(l[17]=i("span",{class:"stat-label"},"评论总数",-1))]),i("div",ia,[i("span",da,d(u.value.totalContent),1),l[18]||(l[18]=i("span",{class:"stat-label"},"总内容数",-1))])]))])])])}}},[["__scopeId","data-v-7b01d241"]]),ma={class:"main-footer"},pa={class:"footer-content"},va={class:"footer-nav"},ha={class:"copyright"},fa=B({__name:"Footer",setup(e){const s=n(()=>(new Date).getFullYear());return(e,l)=>{const n=a("router-link");return t(),r("footer",ma,[i("div",pa,[i("div",va,[i("ul",null,[i("li",null,[b(n,{to:"/about"},{default:w(()=>l[0]||(l[0]=[m("关于")])),_:1,__:[0]})]),i("li",null,[b(n,{to:"/gallery"},{default:w(()=>l[1]||(l[1]=[m("图库")])),_:1,__:[1]})]),i("li",null,[b(n,{to:"/documents"},{default:w(()=>l[2]||(l[2]=[m("文档库")])),_:1,__:[2]})])])]),l[3]||(l[3]=i("div",{class:"footer-nav"},[i("p",null,[i("a",{href:"https://icp.gov.moe/?keyword=20257889",target:"_blank"},"萌ICP备20257889号")])],-1)),i("div",ha,[i("p",null,"© "+d(s.value)+" Vorest0628. All rights reserved.",1)]),l[4]||(l[4]=E('<div class="social-links" data-v-29b79077><p data-v-29b79077><a href="https://github.com/Vorest0628" target="_blank" rel="noopener" data-v-29b79077><i class="fab fa-github" data-v-29b79077></i></a><span data-v-29b79077> | </span><a href="https://space.bilibili.com/276555959" target="_blank" rel="noopener" data-v-29b79077><i class="fab fa-bilibili" data-v-29b79077></i></a></p></div>',1))])])}}},[["__scopeId","data-v-29b79077"]]),_a={class:"main-nav"},ga={class:"search"},ba=B({__name:"Navigation",setup(e){const s=A(),n=l(""),o=()=>{n.value.trim()&&(s.push({name:"search",query:{q:n.value.trim()}}).catch(e=>{}),n.value="")};return(e,s)=>{const l=a("router-link");return t(),r("nav",_a,[i("ul",null,[i("li",null,[b(l,{to:"/",onClick:s[0]||(s[0]=e=>{})},{default:w(()=>s[5]||(s[5]=[m("主页")])),_:1,__:[5]})]),i("li",null,[b(l,{to:"/blog",onClick:s[1]||(s[1]=e=>{})},{default:w(()=>s[6]||(s[6]=[m("博客")])),_:1,__:[6]})]),i("li",null,[b(l,{to:"/comments",onClick:s[2]||(s[2]=e=>{})},{default:w(()=>s[7]||(s[7]=[m("评论")])),_:1,__:[7]})]),i("li",null,[b(l,{to:"/friends",onClick:s[3]||(s[3]=e=>{})},{default:w(()=>s[8]||(s[8]=[m("友情链接")])),_:1,__:[8]})]),i("li",ga,[i("form",{class:"search-form",onSubmit:p(o,["prevent"])},[v(i("input",{type:"search","onUpdate:modelValue":s[4]||(s[4]=e=>n.value=e),placeholder:"搜索博客或文档..."},null,512),[[h,n.value]]),s[9]||(s[9]=i("input",{type:"submit",value:"搜索"},null,-1))],32)])])])}}},[["__scopeId","data-v-0e052038"]]),wa="/assets/background-bottom-Dw6yLUOT.jpg",ya={class:"app"},ka={class:"container"},Aa={class:"main-content"},Ca={key:1,class:"loading"},Ea=[{path:"/",component:B({__name:"MainLayout",setup(s){const n=P(()=>x(()=>import("./ParticlesBackground-ClgKXyGW.js"),__vite__mapDeps([0,1,2,3,4]))),o=l(!1);return _(()=>{"undefined"!=typeof requestIdleCallback?requestIdleCallback(()=>{o.value=!0,document.documentElement.classList.add("with-background-image"),document.documentElement.style.setProperty("--background-image",`url(${wa})`)},{timeout:2e3}):setTimeout(()=>{o.value=!0,document.documentElement.classList.add("with-background-image"),document.documentElement.style.setProperty("--background-image",`url(${wa})`)},1500)}),(s,l)=>{const d=a("router-view");return t(),r("div",ya,[o.value?(t(),e(y(n),{key:0})):u("",!0),i("div",ka,[b(Ne),b(ba),i("main",Aa,[b(d,null,{default:w(({Component:a})=>[(t(),e(L,null,[a&&s.$route.meta.keepAlive?(t(),e(I(a),{key:s.$route.fullPath})):u("",!0)],1024)),a&&!s.$route.meta.keepAlive?(t(),e(I(a),{key:s.$route.fullPath})):u("",!0),a?u("",!0):(t(),r("div",Ca,l[0]||(l[0]=[i("p",null,"页面加载中...",-1)])))]),_:1})]),b(ca),b(fa)])])}}},[["__scopeId","data-v-83500029"]]),children:[{path:"",name:"home",component:()=>x(()=>import("./Home-au5S4xE7.js"),__vite__mapDeps([5,1,6,7,2,3,8])).catch(e=>x(()=>import("./Home-au5S4xE7.js"),__vite__mapDeps([5,1,6,7,2,3,8]))),meta:{title:"首页",keepAlive:!0}},{path:"/about",name:"about",component:()=>x(()=>import("./About-BOrg7sFZ.js"),__vite__mapDeps([9,1,2,3,10])).catch(e=>x(()=>import("./About-BOrg7sFZ.js"),__vite__mapDeps([9,1,2,3,10]))),meta:{title:"关于我",keepAlive:!1}},{path:"/blog",name:"blog",component:()=>x(()=>import("./Blog-CpiEkok1.js"),__vite__mapDeps([11,1,6,2,3,12])).catch(e=>x(()=>import("./Blog-CpiEkok1.js"),__vite__mapDeps([11,1,6,2,3,12]))),meta:{title:"博客",keepAlive:!0}},{path:"/blog/:id",name:"blog-detail",component:()=>x(()=>import("./BlogDetail-CXU9sY7w.js"),__vite__mapDeps([13,1,6,14,3,15,16,17,2,18])).catch(e=>x(()=>import("./BlogDetail-CXU9sY7w.js"),__vite__mapDeps([13,1,6,14,3,15,16,17,2,18]))),meta:{title:"博客详情",keepAlive:!1}},{path:"/gallery",name:"gallery",component:()=>x(()=>import("./Gallery-Bb_KkTXF.js"),__vite__mapDeps([19,1,20,2,3,21])).catch(e=>x(()=>import("./Gallery-Bb_KkTXF.js"),__vite__mapDeps([19,1,20,2,3,21]))),meta:{title:"图库",keepAlive:!0}},{path:"/comments",name:"comments",component:()=>x(()=>import("./Comments-gnKW1Ehq.js"),__vite__mapDeps([22,1,14,3,15,2,23])).catch(e=>x(()=>import("./Comments-gnKW1Ehq.js"),__vite__mapDeps([22,1,14,3,15,2,23]))),meta:{title:"评论",keepAlive:!1}},{path:"/documents",name:"documents",component:()=>x(()=>import("./DocumentLibrary-DgPEfE6X.js"),__vite__mapDeps([24,1,7,2,16,25,26,3,27])).catch(e=>x(()=>import("./DocumentLibrary-DgPEfE6X.js"),__vite__mapDeps([24,1,7,2,16,25,26,3,27]))),meta:{title:"文档库",keepAlive:!0}},{path:"/document",redirect:"/documents"},{path:"/friends",name:"friends",component:()=>x(()=>import("./FriendLinks-DKqo8lIZ.js"),__vite__mapDeps([28,1,29,2,3,30])).catch(e=>x(()=>import("./FriendLinks-DKqo8lIZ.js"),__vite__mapDeps([28,1,29,2,3,30]))),meta:{title:"友情链接",keepAlive:!0}},{path:"/readme",name:"readme",component:()=>x(()=>import("./README-BMv8P4Jn.js"),__vite__mapDeps([31,1,2,3,32])).catch(e=>x(()=>import("./README-BMv8P4Jn.js"),__vite__mapDeps([31,1,2,3,32]))),meta:{title:"使用指南",keepAlive:!1}},{path:"/search",name:"search",component:()=>x(()=>import("./SearchView-CT_fPUks.js"),__vite__mapDeps([33,1,2,3,34])),meta:{title:"搜索结果",keepAlive:!1}},{path:"/admin/dashboard",name:"AdminDashboard",component:()=>x(()=>import("./AdminPanel-BYH8KFqq.js"),__vite__mapDeps([35,1,36,3,37,2,16,17,29,20,7,38,39,40])),meta:{requiresAuth:!0,requiresAdmin:!0,title:"管理员控制台",keepAlive:!1}},{path:"/user/panel",name:"UserPanel",component:()=>x(()=>import("./UserPanel-6kLqNBdo.js").then(e=>e.a),__vite__mapDeps([38,1,39])),meta:{requiresAuth:!0,title:"用户管理面板",keepAlive:!1}}]},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>x(()=>import("./NotFound-zlTV6AUa.js"),__vite__mapDeps([41,1,2,3,42])).catch(e=>x(()=>import("./NotFound-zlTV6AUa.js"),__vite__mapDeps([41,1,2,3,42]))),meta:{title:"页面不存在"}}],Pa=V({history:D(),routes:Ea,scrollBehavior:(e,a,t)=>t||{top:0}});Pa.beforeEach(async(e,a,t)=>{if(e.path!==a.path||"/"===e.path){if(document.title=e.meta.title?`${e.meta.title} - Vorest's Website`:"Vorest's Website",e.meta.requiresAuth||e.meta.requiresAdmin){const{authStorage:a}=await x(async()=>{const{authStorage:e}=await import("./auth-CVx9WU4Z.js");return{authStorage:e}},__vite__mapDeps([36,3])),{token:l,user:n}=a.getAuth();if(!(l&&n||"/"===e.path))return alert(e.meta.requiresAdmin?"请先登录后再访问管理员面板":"请先登录后再访问此页面"),void t("/");if(e.meta.requiresAdmin){if("admin"!==n.role&&"/"!==e.path)return alert("您没有管理员权限"),void t("/");try{const{adminApi:e}=await x(async()=>{const{adminApi:e}=await import("./admin-DYrCn_N8.js");return{adminApi:e}},__vite__mapDeps([37,1,2,3])),a=new Promise((e,a)=>setTimeout(()=>a(new Error("验证超时")),5e3));await Promise.race([e.verifyAdmin(),a])}catch(s){if("/"!==e.path)return a.clearAuth(),alert("登录已过期，请重新登录"),void t("/")}}else if(e.meta.requiresAuth)try{const{authApi:e}=await x(async()=>{const{authApi:e}=await Promise.resolve().then(()=>z);return{authApi:e}},void 0),a=new Promise((e,a)=>setTimeout(()=>a(new Error("验证超时")),5e3));await Promise.race([e.getCurrentUser(),a])}catch(s){if("/"!==e.path)return a.clearAuth(),alert("登录已过期，请重新登录"),void t("/")}}t()}else t(!1)}),Pa.onError(e=>{}),Pa.afterEach((e,a)=>{}),window.addEventListener("error",e=>{if(e.filename&&(e.filename.includes("content_scripts")||e.filename.includes("extension://")||e.filename.includes("chrome-extension://")))return e.preventDefault(),!1}),window.addEventListener("unhandledrejection",e=>{const a=e.reason;if(a&&a.stack&&(a.stack.includes("content_scripts")||a.stack.includes("extension://")||a.stack.includes("chrome-extension://")))return e.preventDefault(),!1});const La=T(U);for(const[Ia,Va]of Object.entries(O))La.component(Ia,Va);La.use(j()),La.use(Pa),La.use(R),La.mount("#app");export{B as _,x as a,N as b,G as u};
