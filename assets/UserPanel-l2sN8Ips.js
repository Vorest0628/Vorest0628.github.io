const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserCommentManager-BAPK0Z6Z.js","assets/vendor-CeqXcVya.js","assets/index-BH5EIy1g.js","assets/particles-D6-XlEtG.js","assets/index-BKSHD0KJ.css","assets/UserCommentManager-CiW2o1XW.css","assets/UserAccountSettings-DZ4zGetX.js","assets/UserAccountSettings-C_TLWDuI.css"])))=>i.map(i=>d[i]);
import{a as s,_ as E,u as O,b as v}from"./index-BH5EIy1g.js";import{r as b,c as $,j as z,y as g,z as u,A as t,M as h,O as f,u as i,Q as d,I as M,al as _,J as P,R as S,aX as w,az as B,P as D,a6 as I,H as C,K as N}from"./vendor-CeqXcVya.js";const j={getMyStats(){return s.get("/user/stats")},getMyComments(){return s.get("/user/comments")},getMyRecommendations(){return s.get("/user/recommendations")},updateMyComment(e,n){return s.put(`/user/comments/${e}`,n)},deleteMyComment(e){return s.delete(`/user/comments/${e}`)},updateMyRecommendation(e,n){return s.put(`/user/recommendations/${e}`,n)},deleteMyRecommendation(e){return s.delete(`/user/recommendations/${e}`)},updateProfile(e){return s.put("/user/profile",e)},changePassword(e){return s.put("/user/password",e)},resetPassword(e){return s.post("/user/reset-password",e)}},L={class:"user-panel-content"},F={class:"panel-header"},H={class:"header-content"},J={class:"user-info"},K={class:"user-section"},Q={class:"section-tabs"},X={class:"tab-label"},q={class:"tab-content"},G={class:"my-comments"},W={class:"account-settings"},Y={__name:"UserPanel",setup(e){const n=w(()=>v(()=>import("./UserCommentManager-BAPK0Z6Z.js"),__vite__mapDeps([0,1,2,3,4,5]))),A=w(()=>v(()=>import("./UserAccountSettings-DZ4zGetX.js"),__vite__mapDeps([6,1,2,3,4,7]))),c=O(),p=B(),l=b("my-comments"),m=b({myComments:0}),k=$(()=>[{key:"my-comments",label:"我的评论",count:m.value.myComments},{key:"settings",label:"账户设置",count:0}]),V=async()=>{try{const r=await j.getMyStats();r.success&&(m.value=r.data)}catch(r){console.error("加载用户统计数据失败:",r),m.value={myComments:0}}},U=async()=>{if(!c.isAuthenticated){alert("请先登录后再访问用户面板"),p.push("/");return}if(c.isAdmin){console.log("管理员用户，重定向到管理员控制台"),p.push("/admin/dashboard");return}await V()};return z(async()=>{await c.initAuth(),await U()}),(r,o)=>{var y;const R=_("el-badge"),x=_("el-tab-pane"),T=_("el-tabs");return u(),g("div",L,[t("div",F,[t("div",H,[o[2]||(o[2]=t("h1",null,"用户管理面板",-1)),t("p",J,[h(" 欢迎，"+f((y=i(c).user)==null?void 0:y.username)+"！ ",1),o[1]||(o[1]=t("span",{class:"role-badge user"},"普通用户",-1))])])]),t("div",K,[t("div",Q,[d(T,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),type:"border-card",class:"custom-tabs"},{default:M(()=>[(u(!0),g(D,null,I(k.value,a=>(u(),C(x,{key:a.key,label:a.label,name:a.key},{label:M(()=>[t("span",X,[h(f(a.label)+" ",1),a.count>0?(u(),C(R,{key:0,value:a.count,type:"primary",style:{"margin-left":"5px"}},null,8,["value"])):N("",!0)])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),t("div",q,[P(t("div",G,[d(i(n))],512),[[S,l.value==="my-comments"]]),P(t("div",W,[d(i(A))],512),[[S,l.value==="settings"]])])])])}}},Z=E(Y,[["__scopeId","data-v-a37e6482"]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as U,se as a,j as u};
