const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Blog-BNYlvGH7.js","assets/vue-core-BH5VTiN9.js","assets/blog-BUvA8n2N.js","assets/index-BPjNz-Ae.js","assets/element-ui-B3nexxj5.js","assets/utils-DA1bHc0c.js","assets/index-DmhQ4lI9.css","assets/Blog-D6E1g-vt.css","assets/DocumentLibrary-r8VzZJRz.js","assets/document-CHhm0Gxb.js","assets/marked.esm-BNz8l3bD.js","assets/doc-viewer-DbAwu9RU.js","assets/pdf-lib-Bvf7_W21.js","assets/DocumentLibrary-CgUMn5S-.css","assets/Gallery-BZWVqttJ.js","assets/gallery-B1-iJOZh.js","assets/Gallery-Bk5XPkQl.css","assets/FriendLinks-CycQmDYk.js","assets/friendLink-Ma5Uid9E.js","assets/FriendLinks-BygWDlhb.css"])))=>i.map(i=>d[i]);
import{_ as a,a as e}from"./index-BPjNz-Ae.js";import{r as s,j as t,S as c,y as l,z as n,A as i,O as r,K as d,P as o,a6 as u,aP as p,aO as v}from"./vue-core-BH5VTiN9.js";import{b as g}from"./blog-BUvA8n2N.js";import{d as m}from"./document-CHhm0Gxb.js";import"./element-ui-B3nexxj5.js";import"./utils-DA1bHc0c.js";const y={class:"home"},h={class:"datetime-section"},b={class:"current-date"},_={class:"current-time"},k={class:"main-content"},f={class:"pinned-section"},C={key:0,class:"pinned-category"},j={class:"pinned-cards"},D=["onClick"],E={class:"card-content"},w={class:"card-title"},I={class:"card-meta"},L={class:"card-date"},x={class:"card-category"},A={class:"card-excerpt"},P={class:"pinned-category"},T={class:"pinned-cards"},z=["onClick"],O={class:"card-content"},S={class:"card-title"},N={class:"card-meta"},R={class:"card-date"},V={class:"card-category"},q={class:"card-excerpt"},B={key:1,class:"no-pinned"},F={class:"recent-section"},G={key:0,class:"loading-state"},H={key:1,class:"error-state"},K={key:2,class:"recent-blogs"},$=["onClick"],J={class:"blog-content"},M={class:"blog-title"},Q={class:"blog-description"},U={class:"blog-meta"},W={class:"blog-date"},X={class:"blog-category"},Y={key:0,class:"blog-tags"},Z={key:3,class:"no-recent"},aa=a({__name:"Home",setup(a){const aa=v(),ea=s(""),sa=s(""),ta=s([]),ca=s([]),la=s([]),na=s(!1),ia=s("");let ra=null;const da=()=>{const a=new Date;ea.value=a.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),sa.value=a.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},oa=async()=>{na.value=!0,ia.value="";try{const[a,e,s]=await Promise.all([ua(),pa(),va()])}catch(a){ia.value="åŠ è½½å†…å®¹å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}finally{na.value=!1}},ua=async()=>{try{const a=await m.getDocuments({status:"pinned",limit:5});if(a.success){const e=a.data.documents||a.data||[];return ta.value=e.filter(a=>"pinned"===a.status),ta.value}return[]}catch(a){return ta.value=[],[]}},pa=async()=>{try{const a=await g.getBlogs({status:"pinned",page:1,pageSize:5});if(a.success){const e=a.data||[];return ca.value=e.filter(a=>"pinned"===a.status),ca.value}return[]}catch(a){return ca.value=[],[]}},va=async()=>{try{const a=await g.getBlogs({status:"published",page:1,pageSize:5});return a.success?(la.value=a.data||[],la.value):[]}catch(a){return la.value=[],[]}},ga=a=>{const e=a.id||a._id;aa.push(`/blog/${e}`)},ma=()=>{aa.push("/readme")},ya=a=>{if(!a)return"æœªçŸ¥æ—¶é—´";const e=new Date(a);return isNaN(e.getTime())?"æœªçŸ¥æ—¶é—´":e.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})};return t(()=>{da(),ra=setInterval(da,1e3),oa(),(()=>{const a=[()=>e(()=>import("./Blog-BNYlvGH7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),()=>e(()=>import("./DocumentLibrary-r8VzZJRz.js"),__vite__mapDeps([8,1,9,3,4,5,6,10,11,12,13])),()=>e(()=>import("./Gallery-BZWVqttJ.js"),__vite__mapDeps([14,1,15,3,4,5,6,16])),()=>e(()=>import("./FriendLinks-CycQmDYk.js"),__vite__mapDeps([17,1,18,3,4,5,6,19]))];"undefined"!=typeof requestIdleCallback?a.forEach((a,e)=>{requestIdleCallback(()=>{a().catch(a=>{})},{timeout:3e3+500*e})}):a.forEach((a,e)=>{setTimeout(()=>{a().catch(a=>{})},2e3+300*e)})})()}),c(()=>{ra&&clearInterval(ra)}),(a,e)=>(n(),l("div",y,[i("div",h,[i("div",b,r(ea.value),1),i("div",_,r(sa.value),1),e[0]||(e[0]=i("div",{class:"welcome-message"},"æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººç½‘ç«™",-1))]),i("div",k,[i("section",f,[e[7]||(e[7]=i("h2",{class:"section-title"},"ğŸ“Œ ç½®é¡¶å†…å®¹",-1)),ta.value.length>0?(n(),l("div",C,[e[2]||(e[2]=i("h3",{class:"category-title"},"ğŸ—‚ï¸ ç½®é¡¶æ–‡æ¡£",-1)),i("div",j,[(n(!0),l(o,null,u(ta.value,s=>(n(),l("div",{key:s.id||s._id,class:"pinned-card document-card",onClick:a=>(a=>{aa.push({path:"/documents",query:{search:a.title}})})(s)},[e[1]||(e[1]=i("div",{class:"card-icon"},"ğŸ“„",-1)),i("div",E,[i("h4",w,r(s.title),1),i("p",I,[i("span",L,r(ya(s.createdAt)),1),i("span",x,r(s.category),1)]),i("p",A,r(a.getDocumentExcerpt(s)),1)])],8,D))),128))])])):d("",!0),i("div",P,[e[5]||(e[5]=i("h3",{class:"category-title"},"ğŸ“ ç½®é¡¶åšå®¢",-1)),i("div",T,[i("div",{class:"pinned-card blog-card special-blog",onClick:ma},e[3]||(e[3]=[p('<div class="card-icon" data-v-930b1ce2>ğŸ“–</div><div class="card-content" data-v-930b1ce2><h4 class="card-title" data-v-930b1ce2>ğŸ“– ç½‘ç«™ä½¿ç”¨æŒ‡å—</h4><p class="card-meta" data-v-930b1ce2><span class="card-date" data-v-930b1ce2>æ°¸ä¹…ç½®é¡¶</span><span class="card-category" data-v-930b1ce2>ä½¿ç”¨æŒ‡å—</span></p><p class="card-excerpt" data-v-930b1ce2>è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œå¸¸è§é—®é¢˜è§£ç­”ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°ä½¿ç”¨ç½‘ç«™åŠŸèƒ½</p></div>',2)])),(n(!0),l(o,null,u(ca.value,a=>(n(),l("div",{key:a.id||a._id,class:"pinned-card blog-card",onClick:e=>ga(a)},[e[4]||(e[4]=i("div",{class:"card-icon"},"âœï¸",-1)),i("div",O,[i("h4",S,r(a.title),1),i("p",N,[i("span",R,r(ya(a.publishedAt||a.createdAt)),1),i("span",V,r(a.category),1)]),i("p",q,r(a.description||a.excerpt),1)])],8,z))),128))])]),0===ta.value.length&&0===ca.value.length?(n(),l("div",B,e[6]||(e[6]=[i("div",{class:"no-content-icon"},"ğŸ“Œ",-1),i("p",null,"æš‚æ— ç½®é¡¶å†…å®¹",-1)]))):d("",!0)]),i("section",F,[e[12]||(e[12]=i("h2",{class:"section-title"},"ğŸ“° æœ€è¿‘åšå®¢",-1)),na.value?(n(),l("div",G,e[8]||(e[8]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"æ­£åœ¨åŠ è½½å†…å®¹...",-1)]))):ia.value?(n(),l("div",H,[e[9]||(e[9]=i("div",{class:"error-icon"},"âŒ",-1)),i("p",null,r(ia.value),1),i("button",{onClick:oa,class:"retry-btn"},"é‡è¯•")])):la.value.length>0?(n(),l("div",K,[(n(!0),l(o,null,u(la.value,a=>(n(),l("div",{key:a.id||a._id,class:"blog-item",onClick:e=>ga(a)},[i("div",J,[i("h3",M,r(a.title),1),i("p",Q,r(a.description||a.excerpt||"æš‚æ— æè¿°"),1),i("div",U,[i("span",W,r(ya(a.date)),1),i("span",X,r(a.category),1),a.tags&&a.tags.length>0?(n(),l("span",Y,r(a.tags.slice(0,3).join(", ")),1)):d("",!0)])]),e[10]||(e[10]=i("div",{class:"blog-arrow"},"â†’",-1))],8,$))),128))])):(n(),l("div",Z,e[11]||(e[11]=[i("div",{class:"no-content-icon"},"ğŸ“",-1),i("p",null,"æš‚æ— æœ€è¿‘åšå®¢",-1)])))])])]))}},[["__scopeId","data-v-930b1ce2"]]);export{aa as default};
