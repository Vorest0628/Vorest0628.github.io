import{r as a,c as t,j as s,y as i,z as e,A as l,K as n,P as r,a6 as o,O as u,D as c,V as v}from"./vue-core-BH5VTiN9.js";import{f as d}from"./friendLink-Ma5Uid9E.js";import{_ as p}from"./index-BPjNz-Ae.js";import"./element-ui-B3nexxj5.js";import"./utils-DA1bHc0c.js";const g={class:"friend-links"},k={class:"link-filters"},h=["onClick"],m={key:0,class:"loading-state"},y={key:1,class:"error-state"},f={key:2,class:"links-grid"},w=["onClick"],b={class:"link-avatar"},C=["src","alt"],j={class:"link-info"},_={class:"link-meta"},A={class:"link-category"},L={key:0,class:"link-tags"},V={class:"link-actions"},W=["href"],F={class:"visit-count"},G={key:3,class:"empty-state"},S=p({__name:"FriendLinks",setup(p){const S=a("å…¨éƒ¨"),x=a([]),H=a(!1),J=a(""),$=t(()=>["å…¨éƒ¨",...new Set(x.value.map(a=>a.category))]),z=t(()=>{let a=x.value.filter(a=>!0===a.isActive);return"å…¨éƒ¨"!==S.value&&(a=a.filter(a=>a.category===S.value)),a}),D=async()=>{H.value=!0,J.value="";try{const a=await d.getFriendLinks();if(!a.success)throw new Error(a.message||"è·å–å‹æƒ…é“¾æ¥å¤±è´¥");x.value=a.data.friendLinks||a.data}catch(a){J.value=a.message||"è·å–å‹æƒ…é“¾æ¥å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",x.value=[{id:1,name:"Vue.js å®˜æ–¹æ–‡æ¡£",url:"https://vuejs.org",avatar:"https://vuejs.org/logo.svg",description:"Vue.js å®˜æ–¹æ–‡æ¡£ï¼Œæ¸è¿›å¼JavaScriptæ¡†æ¶",category:"å­¦ä¹ èµ„æº",isActive:!0,tags:["Vue","JavaScript","å‰ç«¯"],visitCount:150},{id:2,name:"GitHub",url:"https://github.com",avatar:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",description:"å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°",category:"å·¥å…·ç½‘ç«™",isActive:!0,tags:["Git","å¼€æº","ä»£ç "],visitCount:89}]}finally{H.value=!1}},E=a=>a?"æ­£å¸¸":"å¾…å®¡æ ¸",I=a=>{if(!a)return"/image/default-logo.png";if(a.startsWith("http"))return a;return`${"undefined"==typeof window||"shirakawananase.top"!==window.location.hostname&&!window.location.hostname.endsWith(".shirakawananase.top")?"http://localhost:3000":"https://api.shirakawananase.top"}${a}`},K=a=>a?a.startsWith("http://")||a.startsWith("https://")?a:"https://"+a:"#";return s(()=>{D()}),(a,t)=>(e(),i("div",g,[t[4]||(t[4]=l("h1",null,"å‹æƒ…é“¾æ¥",-1)),t[5]||(t[5]=l("div",{class:"intro-section"},[l("p",null,"æ¬¢è¿æ¥åˆ°å‹æƒ…é“¾æ¥é¡µé¢ï¼è¿™é‡Œæ”¶å½•äº†ä¸€äº›ä¼˜ç§€çš„ä¸ªäººåšå®¢å’ŒæŠ€æœ¯ç½‘ç«™ã€‚"),l("p",null,"å¸Œæœ›è¿™äº›ç½‘ç«™èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¸€èµ·åœ¨äº’è”ç½‘çš„ä¸–ç•Œé‡Œæ¢ç´¢å­¦ä¹ å§ï¼")],-1)),l("div",k,[(e(!0),i(r,null,o($.value,a=>(e(),i("button",{key:a,onClick:t=>(a=>{S.value=a})(a),class:c([{active:S.value===a},"category-btn"])},u(a),11,h))),128))]),H.value?(e(),i("div",m,t[1]||(t[1]=[l("p",null,"æ­£åœ¨åŠ è½½å‹æƒ…é“¾æ¥...",-1)]))):J.value?(e(),i("div",y,[t[2]||(t[2]=l("h3",null,"åŠ è½½å¤±è´¥",-1)),l("p",null,u(J.value),1),l("button",{onClick:D,class:"retry-btn"},"é‡è¯•")])):(e(),i("div",f,[(e(!0),i(r,null,o(z.value,a=>{return e(),i("div",{key:a._id||a.id,class:"link-card",onClick:t=>(async a=>{try{await d.clickFriendLink(a._id||a.id),a.visitCount=(a.visitCount||0)+1}catch(t){}window.open(K(a.url),"_blank")})(a)},[l("div",b,[l("img",{src:I(a.avatar),alt:a.name},null,8,C)]),l("div",j,[l("h3",null,u(a.name),1),l("p",null,u(a.description||"æš‚æ— æè¿°"),1),l("div",_,[l("span",A,u(a.category),1),l("span",{class:c(["link-status",(s=a.isActive,s?"status-active":"status-inactive")])},u(E(a.isActive)),3)]),a.tags&&a.tags.length?(e(),i("div",L,[(e(!0),i(r,null,o(a.tags,a=>(e(),i("span",{key:a,class:"tag"},u(a),1))),128))])):n("",!0)]),l("div",V,[l("a",{href:K(a.url),target:"_blank",class:"visit-btn",onClick:t[0]||(t[0]=v(()=>{},["stop"]))}," ğŸ”— è®¿é—® ",8,W),l("span",F,"è®¿é—®: "+u(a.visitCount||0),1)])],8,w);var s}),128))])),H.value||J.value||0!==z.value.length?n("",!0):(e(),i("div",G,t[3]||(t[3]=[l("h3",null,"æš‚æ— å‹é“¾",-1),l("p",null,"è¯¥åˆ†ç±»ä¸‹è¿˜æ²¡æœ‰å‹æƒ…é“¾æ¥",-1)])))]))}},[["__scopeId","data-v-771078bd"]]);export{S as default};
